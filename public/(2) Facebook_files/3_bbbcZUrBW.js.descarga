;/*FB_PKG_DELIM*/

__d("CometMessengerComposerInner.react",["fbt","CometLexicalContentEditable.react","CometLexicalPlaceholder.react","LSMessagingThreadTypeUtil","LexicalComposerContext","LexicalErrorBoundary","LexicalHistoryPlugin","MLCInstrumentationPluginDeferred__INTERNAL.react","cr:1948","cr:2559","cr:7192","react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useMemo,m=c("requireDeferred")("CometMessengerHandlePastedFileComposerPlugin").__setRef("CometMessengerComposerInner.react"),n=(e=b("cr:2559").RichTextPlugin)!=null?e:b("cr:2559").PlainTextPlugin,o={container:{backgroundColor:"x16sw7j7",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",boxSizing:"x9f619",caretColor:"xlai7qp",flexGrow:"x1iyjqo2",minWidth:"xeuugli",$$css:!0},editor:{flexGrow:"x1iyjqo2",maxHeight:"x1gh3ibb",minHeight:"xisnujt",minWidth:"xeuugli",overflowY:"x1odjw0f",$$css:!0},editorWrapper:{display:"x78zum5",flexGrow:"x1iyjqo2",marginEnd:"xq8finb",marginLeft:null,marginRight:null,marginStart:"x16n37ib",marginTop:"x1xmf6yo",marginBottom:"x1e56ztr",minWidth:"xeuugli",position:"x1n2onr6",$$css:!0},inputRow:{display:"x78zum5",justifyContent:"x13a6bvl",$$css:!0}},p=h._("__JHASH__mUqaYJ48Erc__JHASH__").toString();function a(a){var e=a.ariaDescribedBy,f=a.contentEditableRef,g=a.editor,h=a.endContent,i=a.handlePastedFiles,q=a.isSecureThread,r=a.mentionsPlugin,s=a.placeholderText;s=s===void 0?"Aa":s;var t=a.policyProduct,u=a.startContent,v=a.surface,w=a.testId,x=a.threadSubtype;a=a.topContent;var y=k(function(a){a=(a=a)!=null?a:null;f.current=a;g.setRootElement(a)},[f,g]),z=d("LexicalComposerContext").createLexicalComposerContext(),A=l(function(){return[g,z]},[g,z]);e=j.jsx(c("CometLexicalContentEditable.react"),{ariaDescribedBy:e,ariaLabel:p,contentEditableRef:y,editor:g,spellCheck:!0,tabIndex:0,webDriverTestID:w,xstyle:o.editor});y=j.jsx(c("CometLexicalPlaceholder.react"),{children:s});w=!(d("LSMessagingThreadTypeUtil").isPageToUserThread(x)&&b("cr:7192"))&&!Boolean(q);s=c("useDeferredModuleOnReady")(m);return j.jsxs("div",{className:"x16sw7j7 x107yiy2 xv8uw2v x1tfwpuw x2g32xy x9f619 xlai7qp x1iyjqo2 xeuugli",children:[j.jsx(c("MLCInstrumentationPluginDeferred__INTERNAL.react"),{editor__DEPRECATED:g,policyProduct:t,surface:v}),a,j.jsxs("div",{className:"x78zum5 x13a6bvl",children:[u,j.jsx("div",{className:"x78zum5 x1iyjqo2 xq8finb x16n37ib x1xmf6yo x1e56ztr xeuugli x1n2onr6",children:j.jsxs(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:A,children:[n!=null&&j.jsx(n,{ErrorBoundary:c("LexicalErrorBoundary"),contentEditable:e,placeholder:y}),j.jsx(d("LexicalHistoryPlugin").HistoryPlugin,{})]})}),h]}),r,w&&b("cr:1948")!=null&&j.jsx(b("cr:1948"),{editor:g}),d("LSMessagingThreadTypeUtil").isPageToUserThread(x)&&b("cr:7192")&&j.jsx(b("cr:7192"),{editor:g}),s==null?null:j.jsx(s,{editor:g,handlePastedFiles:i})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("FBP2MECPCheckoutDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("FBP2MECPCheckoutDialog.react").__setRef("FBP2MECPCheckoutDialog.entrypoint")};g["default"]=a}),98);
__d("LSMessageRenderingType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,NON_COLLAPSIBLE_ADMIN_MESSAGE:1,HIDDEN:2,RICH_TEXT_COMMON_MARK:3});f["default"]=a}),66);
__d("LikeFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M462 1080.384c0-.575-.193-.74-.403-.905.116-.191.226-.466.226-.817 0-.717-.555-1.162-1.449-1.162h-2.437c.067-.376.147-1.401.147-1.766 0-.756-.18-1.697-.873-2.069a1.224 1.224 0 0 0-.637-.165c-.399 0-.663.164-.757.267a.312.312 0 0 0-.082.236l.058 1.567a.625.625 0 0 1-.071.348l-1.207 2.693a.195.195 0 0 1-.083.075l-.008.003-.007.004-.178.097a.454.454 0 0 0-.239.4v4.286c0 .132.06.257.16.344.052.045.727.68 1.393.68h3.93c.609 0 1.012-.206 1.231-.61.2-.37.168-.725.089-.983.332-.105.645-.355.738-.818.06-.299-.01-.548-.106-.733.291-.16.565-.396.565-.972m-9.553-2.384h-1.893a.554.554 0 0 0-.554.553v5.894c0 .306.248.553.553.553h1.893a.554.554 0 0 0 .554-.553v-5.894a.553.553 0 0 0-.553-.553"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("useSecureThreadJid",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReady","Promise","ReQL","ReQLSuspense","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).useRef;function a(a){var e,g=(i||(i=c("useReStore")))(),k=l();e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadType"]).getKeyRange(a)},[g,a],f.id+":33"))==null?void 0:e.threadType;var m=e?d("LSMessagingThreadTypeUtil").isSecure(e):!1;d("Int64Hooks").useEffectInt64(function(){if(a==null||(j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).zero||!m))return;c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(g.tables,a,"useThreadJid",function(a,c,d){k.current=d;return(h||(h=b("Promise"))).resolve()}))},[g,a,m]);return function(){return k.current}}g["default"]=a}),98);
__d("MAWEphemeralAdminMsgCta.react",["CometTextWithEntities.react","JSResourceForInteraction","MWXPressable.react","QPLUserFlow","qpl","react","useMWXLazyDialog","useSecureThreadJid"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("JSResourceForInteraction")("MAWEphemeralSettingsDialog.react").__setRef("MAWEphemeralAdminMsgCta.react");function a(a){var b=a.threadKey;a=a.title;var d=c("useSecureThreadJid")(b),e={getThreadJid:d,threadKey:b};d=c("useMWXLazyDialog")(j);var f=d[0],g=function(){c("QPLUserFlow").start(c("qpl")._(1056845690,"2034"),{annotations:{string:{action_type:"change_ephemeral_message_duration"}}}),f(e)};return i.jsx(c("MWXPressable.react"),{onPress:function(){return g()},children:i.jsx(c("CometTextWithEntities.react"),{text:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWInternalLog",["WALoggerDeferred","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}function a(a){c("gkx")("23904")&&void d("WALoggerDeferred").LOG(h(),a)}g.internalLog=a}),98);
__d("MWEncryptedBackupsIssueRangeQueryDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MWEncryptedBackupsIssueRangeQuery").__setRef("MWEncryptedBackupsIssueRangeQueryDeferred");function a(a){var b=a.db,c=a.newerNumMessages,d=a.numMessages,e=a.sortOrderMs,f=a.threadId;h.onReady(function(a){a.runQuery(b,f,e,d,c)})}g.issueRangeQueryDeferred=a}),98);
__d("MAWFetchCutoverMessages",["I64","LSFactory","LSIssueMessagesRangeQueryStoredProcedure","MAWBridgeSendAndReceive","MAWDbMsg","MAWInternalLog","MAWMiActOnActThreadReady","MWEncryptedBackupsIssueRangeQueryDeferred","Promise","ReQL","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["useFetchSecureMessages: threadJid: "," threadId: "," minMsgSortOrderTsResponse ",""]);j=function(){return a};return a}function k(a,d,e,f){return a.runInTransaction(function(a){return f!=null&&e!=null?c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:d,referenceTimestampMs:e.minTimestampMs,threadKey:f}):(i||(i=b("Promise"))).resolve()},"readwrite")}function a(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.messages_ranges_v2__generated).getKeyRange(c))),g=(yield d("ReQL").firstAsync(e!=null?d("ReQL").fromTableAscending(a.tables.messages_ranges_v2__generated).getKeyRange(e):d("ReQL").empty()));if(f==null)return;var i=f.hasMoreBefore,l=d("MAWDbMsg").toMsgId(f.minMessageId);return d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,c,"MAWFetchMoreMessages",function(c,f,m){d("MAWInternalLog").internalLog("MAWFetchCutoverMessages: start loadMoreMsgs");return d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMsgs",{chatJid:m,direction:"before",numMsgs:10,offsetMsgId:l,threadId:f}).then(function(c){d("MAWInternalLog").internalLog("MAWFetchCutoverMessages: response is "+c.hasMoreBefore.toString());if(c.hasMoreBefore)return;return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMaybeNextNonAdminMsgSortOrderMs",{mayBeAdminMsgId:l,threadId:f}).then(function(c){d("WATagsLogger").TAGS(["labyrinth_web","useFetchSecureMessages"]).LOG(j(),m,f,c.minMsgTimestampMs);d("MWEncryptedBackupsIssueRangeQueryDeferred").issueRangeQueryDeferred({db:a,newerNumMessages:(h||(h=d("I64"))).zero,numMessages:h.of_string("10"),sortOrderMs:h.of_float(c.minMsgTimestampMs),threadId:f});if(!i)return k(a,b,g,e)})})})});return l.apply(this,arguments)}g["default"]=a}),98);
__d("MAWFetchSecureMessages",["I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWInternalLog","MAWMiActOnActThreadReady","MWEncryptedBackupsIssueRangeQueryDeferred","ReQL","WATagsLogger","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWFetchSecureMessages: threadJid: "," threadId: "," minMsgSortOrderTsResponse ",""]);i=function(){return a};return a}var j=10;function a(a,b,c,d,e,f,g){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,k,l){k===void 0&&(k=j);var m=l.addQPLAnnotations,n=l.markQPLFailure,o=l.markQPLPoint,p=l.markQPLStart;l=l.markQPLSuccess;var q=p();function r(a){o(q,"load_more_msgs_success","successfully loaded messages from worker"),m(q,a)}d("MAWInternalLog").internalLog("MAWFetchSecureMessages: started to get message range");o(q,"before_start_load_more_msgs","before fetching messages range from table");m(q,{string:babelHelpers["extends"]({direction:g,thread_id:(h||(h=d("I64"))).to_string(e)},f!=null?{thread_type:(h||(h=d("I64"))).to_string(f)}:{})});p=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.messages_ranges_v2__generated).getKeyRange(e)));try{if(p!=null&&!p.isLoadingBefore&&g==="before"){o(q,"start_load_more_msgs","starting the load more QPL event");f=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,e,"MAWFetchMoreMessages"));var s=f.chatId;f=f.chatJid;d("MAWInternalLog").internalLog("MAWFetchSecureMessages: put message range");o(q,"put_message_range","put txn in messages_ranges_v2__generated table");yield b.messages_ranges_v2__generated.put({hasMoreAfter:p.hasMoreAfter,hasMoreBefore:p.hasMoreBefore,isLoadingAfter:p.isLoadingAfter,isLoadingBefore:!0,maxMessageId:p.maxMessageId,maxTimestampMs:p.maxTimestampMs,minMessageId:p.minMessageId,minTimestampMs:p.minTimestampMs,threadKey:p.threadKey});d("MAWInternalLog").internalLog("MAWFetchSecureMessages: loadMoreMsgs started");o(q,"send_loadMoreMsgs_to_backend","calling backend with loadMoreMsgs");var t=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMsgs",{chatJid:f,direction:g,numMsgs:k,offsetMsgId:d("MAWDbMsg").toMsgId(p.minMessageId),threadId:s}));d("MAWInternalLog").internalLog("MAWFetchSecureMessages: response is "+t.hasMoreBefore.toString());r({bool:{hasMoreBefore:t.hasMoreBefore}});if(t.hasMoreBefore){l(q);return}t=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMaybeNextNonAdminMsgSortOrderMs",{mayBeAdminMsgId:d("MAWDbMsg").toMsgId(p.minMessageId),threadId:s}));d("WATagsLogger").TAGS(["labyrinth_web","MAWFetchSecureMessages"]).LOG(i(),f,s,t.minMsgTimestampMs);o(q,"issued_range_query","MAWFetchSecureMessages: minMsgSortOrderTsResponse "+t.minMsgTimestampMs);l(q);return d("MWEncryptedBackupsIssueRangeQueryDeferred").issueRangeQueryDeferred({db:a,newerNumMessages:(h||(h=d("I64"))).zero,numMessages:h.of_int32(k),sortOrderMs:h.of_float(t.minMsgTimestampMs),threadId:s})}if(c("gkx")("24143")&&p!=null&&!p.isLoadingAfter&&g==="after"){o(q,"start_load_more_msgs","starting the load more QPL event");f=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,e,"MAWFetchMoreMessages"));t=f.chatId;s=f.chatJid;d("MAWInternalLog").internalLog("MAWFetchSecureMessages: put message range");yield b.messages_ranges_v2__generated.put({hasMoreAfter:p.hasMoreAfter,hasMoreBefore:p.hasMoreBefore,isLoadingAfter:!0,isLoadingBefore:p.isLoadingBefore,maxMessageId:p.maxMessageId,maxTimestampMs:p.maxTimestampMs,minMessageId:p.minMessageId,minTimestampMs:p.minTimestampMs,threadKey:p.threadKey});d("MAWInternalLog").internalLog("MAWFetchSecureMessages: loadMoreMsgs started");o(q,"send_loadMoreMsgs_to_backend","MAWFetchSecureMessages: loadMoreMsgs started");g=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMsgs",{chatJid:s,direction:"after",numMsgs:k,offsetMsgId:d("MAWDbMsg").toMsgId(p.maxMessageId),threadId:t}));r({bool:{hasMoreAfter:g.hasMoreAfter}});d("MAWInternalLog").internalLog("MAWFetchSecureMessages: response is "+g.hasMoreAfter.toString())}m(q,{bool:{isLoadingAfter:p==null?void 0:p.isLoadingAfter,isLoadingBefore:p==null?void 0:p.isLoadingBefore}});o(q,"already_loading_messages","end the load more QPL event.");l(q)}catch(a){n(q,a)}});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MAWQPLLogger",["QPLUserFlow","Random"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{addQPLAnnotations:function(b,d){c("QPLUserFlow").addAnnotations(a,d,{instanceKey:b})},markQPLCancel:function(b){c("QPLUserFlow").endCancel(a,{instanceKey:b})},markQPLFailure:function(b,d){var e;c("QPLUserFlow").endFailure(a,(e=d==null?void 0:d.name)!=null?e:"fail",{error:d,instanceKey:b})},markQPLFailureWithMsg:function(b,d){c("QPLUserFlow").endFailure(a,d,{instanceKey:b})},markQPLPoint:function(b,d,e){c("QPLUserFlow").addPoint(a,d,{debugInfo:e,instanceKey:b})},markQPLStart:function(){var b=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(a,{instanceKey:b});return b},markQPLSuccess:function(b){c("QPLUserFlow").endSuccess(a,{instanceKey:b})}}}g["default"]=a}),98);
__d("useMAWQPLLogger",["MAWQPLLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a){return i(function(){return c("MAWQPLLogger")(a)},[a])}g.useMAWQPLLogger=a}),98);
__d("MAWFetchMoreMessages",["Int64Hooks","MAWFetchCutoverMessages","MAWFetchSecureMessages","cr:8731","promiseDone","qpl","useMAWQPLLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=(h||(h=c("useReStore")))();return d("Int64Hooks").useCallbackInt64(function(d){c("promiseDone")(c("MAWFetchCutoverMessages")(f,d,a,b))},[f,a,b])}function e(){return d("Int64Hooks").useMemoInt64(function(){return new(b("cr:8731"))()},[])}function f(a){var b=(h||(h=c("useReStore")))(),e=d("useMAWQPLLogger").useMAWQPLLogger(c("qpl")._(25303796,"1974"));return d("Int64Hooks").useCallbackInt64(function(d,f,g,h){return c("MAWFetchSecureMessages")(b,d,f,a,g,h,e)},[b,e,a])}g.useFetchCutoverMessages=a;g.useSecureDataStorage=e;g.useFetchSecureMessages=f}),98);
__d("MAWFetchMoreMessagesWhenEnabled",["cr:1501","cr:7005"],(function(a,b,c,d,e,f,g){"use strict";c=(a=b("cr:7005"))!=null?a:b("cr:1501");d=c;g["default"]=d}),98);
__d("MAWHotLike.react",["MessengerHotLikeSVGReact.bs","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={likePreview:{display:"x78zum5","float":"x1guec7k",height:"x1dnml7z",width:"x7tvc40",$$css:!0},noCustomLikePreview:{display:"x78zum5",justifyContent:"xl56j7k",$$css:!0}};function a(a){a=a.xstyle;return j.jsx("div",{className:(h||(h=c("stylex")))(k.likePreview,k.noCustomLikePreview,a),children:j.jsx(d("MessengerHotLikeSVGReact.bs").MessengerHotLikeSVGReact,{color:"var(--mwp-hotlike-color)"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMediaManagerUtilsDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("MAWMediaManagerUtils").__setRef("MAWMediaManagerUtilsDeferred");b=a;g["default"]=b}),98);
__d("MAWOptimisticUpdateContactRelationship",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType))return;c("promiseDone")(e.runInTransaction(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g;g=(g=(yield d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return!(h||(h=d("I64"))).equal(a.id,f)}))))!=null?g:[void 0,void 0];g[0];g=g[1];if(g==null)return;var i=babelHelpers["extends"]({},g,{contactViewerRelationship:(h||(h=d("I64"))).of_string("2")});yield b.contacts.upsert([g.id],i);d("LSMessagingThreadTypeUtil").isSecure(a.threadType)&&(yield c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(b),{contactId:g.id}))});return function(a){return g.apply(this,arguments)}}(),"readwrite"))}g.call=a}),98);
__d("MWChatComposer3PBotCommandViewItem.react",["CometSearchMentionsBaseViewItem.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var d=b.label,e=b.rawData.subtitle;return i.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:b,children:i.jsx(c("MWXTextPairing.react"),{headline:d,level:4,meta:e,metaLineLimit:1,reduceEmphasis:!0})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCommandsComposerPluginTextNode",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d,e=a.commandId,f=a.commandPrefix,g=a.handle;a=a.rangeType;d=b.call(this,""+((d=f)!=null?d:"")+g,c)||this;d.__handle=g;d.__commandId=e;d.__rangeType=a;d.__commandPrefix=f;return d}a.getType=function(){return"command"};a.clone=function(b){var c,d=b.getEntity();return new a({commandId:d.commandId,commandPrefix:(c=b.__commandPrefix)!=null?c:"",handle:d.handle,rangeType:d.rangeType},b.__key)};a.importJSON=function(a){return i({commandId:a.commandId,handle:a.handle,rangeType:a.rangeType})};var c=a.prototype;c.exportJSON=function(){return babelHelpers["extends"]({},b.prototype.exportJSON.call(this),{commandId:this.__commandId,handle:this.__handle,rangeType:this.__rangeType,type:"command"})};c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);a.className="xv78j7m xt0e3qv";a.spellcheck=!1;return a};c.getEntity=function(){return{commandId:this.__commandId,handle:this.__handle,rangeType:this.__rangeType}};c.getRangeType=function(){return this.__rangeType};c.getCommandId=function(){return this.__commandId};return a}(d("Lexical").TextNode);function i(a){return new h(a).setMode("segmented").toggleDirectionless()}g.MessengerLexicalCommandNode=h;g.$createMessengerLexicalCommandNode=i}),98);
__d("createCommandsHandleMatchStrategy",[],(function(a,b,c,d,e,f){"use strict";b="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\[\\]\\\\/!%'\"~=<>_:;";c="\\b[\\w][^\\s"+b+"]";d="(^|\\s|\\/)((?:"+c+"{"+1+",})$)";var g=new RegExp(d);function a(a){var b=a.minMatchLength;return{findMentionableString:function(a){a=g.exec(a);if(a===null)return null;var c=a[1],d=a[2];if(d!=null&&d.length>=b){var e=d;(c==null?void 0:c.startsWith("/"))&&(e=""+c+d);return{leadOffset:a.index+c.length,matchingString:d,replaceableString:e}}return null},name:"CommandsHandleMatchStrategy"}}f["default"]=a}),66);
__d("useMW3PBotsCommandsDataSourceResolverConfig",["I64","Promise","ReQL","ReQLSuspense","createCometMentionMatchStrategy","createCommandsHandleMatchStrategy","useCometMentionsDataSourceResolverConfig","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){var e=(j||(j=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.custom_thread_commands.index("rank")).getKeyRange(a).filter(function(a){return!a.isOpenPersistentMenu}).map(function(a){var b=a.commandDescription,c=a.commandId;a=a.commandText;return{key:(i||(i=d("I64"))).to_string(c),label:a,rawData:{rangeType:"cu",subtitle:b},type:"entry"}})},[e,a],f.id+":33"),k=function(a){return{entries:a.query.length?g.filter(function(b){return b.label.toLowerCase().startsWith(a.query.toLowerCase())}):g,params:a}};return{bootstrap:function(){},fetchCache:k,fetchNetwork:function(a){return(h||(h=b("Promise"))).resolve(k(a))}}}function a(a){a=k(a);a=[{dataSource:a,matchStrategy:c("createCommandsHandleMatchStrategy")({minMatchLength:4})},{dataSource:a,matchStrategy:c("createCometMentionMatchStrategy")({minMatchLength:0,name:"CometMentionsNameMatchStrategy",triggers:"/"})}];return c("useCometMentionsDataSourceResolverConfig")(a,!1)}g["default"]=a}),98);
__d("MW3PBotsCommandsComposerPlugin.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","MWChatComposer3PBotCommandViewItem.react","MWCommandsComposerPluginTextNode","MWThreadKey.react","cometBaseMentionsLexicalCreateNodeStrategy","react","useCometTypeaheadViewListStrategy","useMW3PBotsCommandsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.editor;var b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();b=c("useMW3PBotsCommandsDataSourceResolverConfig")(b);var e=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("MWChatComposer3PBotCommandViewItem.react")});return i.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){return d("MWCommandsComposerPluginTextNode").$createMessengerLexicalCommandNode({commandId:a.key,handle:a.label,rangeType:(a=(a=a.rawData)==null?void 0:a.rangeType)!=null?a:"n"})}),dataSourceResolverConfig:b,editor:a,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatComposerMentionsViewItem.react",["CometIcon.react","CometImageFromIXValue.react","CometProfilePhoto.react","CometSearchMentionsBaseViewItem.react","TetraTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={image:{height:"x1fgtraw",width:"xgd8bvy",$$css:!0}};function a(a){var b,d=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var e=d.handle;e=d.key;e=d.label;var f=d.rawData,g=f.icon,h=f.image,k=f.photoURI;f=f.subtitle;var l;k!=null?l=i.jsx(c("CometProfilePhoto.react"),{size:28,source:{uri:k}}):g!=null?l=i.jsx(c("CometIcon.react"),{color:"primary",disabled:!1,icon:g}):h!=null&&(l=i.jsx(c("CometImageFromIXValue.react"),{source:h,xstyle:j.image}));return i.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:d,itemStartContent:l,testid:void 0,children:i.jsx(c("TetraTextPairing.react"),{body:e,bodyLineLimit:1,level:3,meta:f,metaLineLimit:1})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatComposerMentionsUtils",["remove-accents"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b.length===0)return!0;var d=c("remove-accents")(b).toLowerCase();b=c("remove-accents")(a).toLowerCase();return b.split(" ").some(function(a){return a.startsWith(d)})||b.startsWith(d)}g.doesParticipantNameMatch=a}),98);
__d("MWChatComposerTypeaheadUtil",["fbt","ix","MWChatComposerMentionsUtils","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=h._("__JHASH__5zKX9L3wCmC__JHASH__").toString(),k={decorType:"regular",handle:j,key:"0",label:j,rawData:{image:i("391426"),subtitle:void 0},type:"entry"};function a(a,b,e,f,g,i,l){var m=a.query,n=[];g===!0&&d("MWChatComposerMentionsUtils").doesParticipantNameMatch(j,m)&&n.push(k);if(g===!0?i:!0){b.forEach(function(a){var b=a.actualName,c=a.contactId,e=a.nickname,f=a.profilePictureUrl;a=a.secondaryName;var g=null;a!=null&&d("MWChatComposerMentionsUtils").doesParticipantNameMatch(a,m)?g="secondaryName":d("MWChatComposerMentionsUtils").doesParticipantNameMatch(b,m)?g="name":e!=null&&d("MWChatComposerMentionsUtils").doesParticipantNameMatch(e,m)&&(g="nickname");if(g!=null&&f!=null){var h;n.push({decorType:"regular",handle:(h=a)!=null?h:g==="nickname"?(h=e)!=null?h:b:b,key:c+" "+g,label:b,rawData:{photoURI:f,source:g,subtitle:(h=a)!=null?h:e},type:"entry"})}});if(c("gkx")("24051")){g=h._("__JHASH__sTLNkkV9rF7__JHASH__").toString();if(d("MWChatComposerMentionsUtils").doesParticipantNameMatch(g,m)){i=h._("__JHASH__rLeo5-LqefI__JHASH__").toString();n.push({decorType:"regular",handle:g,key:""+e,label:g,rawData:{source:"all",subtitle:i},type:"entry"})}b=h._("__JHASH__qb09B47tS-j__JHASH__").toString();if(d("MWChatComposerMentionsUtils").doesParticipantNameMatch(b,m)){g=h._("__JHASH__Y9cD1qBx4DO__JHASH__").toString();n.push({decorType:"regular",handle:b,key:e+"-active",label:b,rawData:{source:"all",subtitle:g},type:"entry"})}}}n.length>l&&(n=n.slice(0,l));n.length<l&&f&&f(m,l-n.length);return{entries:n,params:a}}var l=(e={},e[j]="ai",e);function b(a){a=l[a];return a==null?"p":a}g.aiBotMentionsEntry=k;g.fetchCacheComposerMentionsTypeahead=a;g.commandToRangeType=b}),98);
__d("MessengerLexicalActorNode",["MWChatComposerTypeaheadUtil","MessengerLexicalEntityTextNode"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.replace(" name","");a=a.replace(" nickname","");a=a.replace(" secondaryName","");return a}var i=function(b){babelHelpers.inheritsLoose(a,b);a.getType=function(){return"actor"};a.clone=function(b){return new a({id:b.__contactID,prefix:b.__prefix,text:b.__text.slice(1)},b.__key)};a.importJSON=function(a){return j({id:a.id,prefix:a.prefix,text:a.text})};var c=a.prototype;c.exportJSON=function(){return babelHelpers["extends"]({},b.prototype.exportJSON.call(this),{id:this.__contactID,prefix:this.__prefix,text:this.__text.slice(1),type:"actor"})};function a(a,c){var d=a.id,e=a.prefix;e=e===void 0?"@":e;a=a.text;a=b.call(this,""+e+a,c)||this;a.__contactID=h(d);a.__prefix=e;return a}c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);a.className="xv78j7m xt0e3qv";a.spellcheck=!1;return a};c.getEntity=function(){return{id:this.__contactID,isWeak:!1}};c.getRangeType=function(){return d("MWChatComposerTypeaheadUtil").commandToRangeType(this.__text.slice(1))};return a}(d("MessengerLexicalEntityTextNode").MessengerLexicalEntityTextNode);function j(a,b){b===void 0&&(b="segmented");return new i(a).setMode(b).toggleDirectionless()}function a(a){return a instanceof i}g.MessengerLexicalActorNode=i;g.$createMessengerLexicalActorNode=j;g.$isMessengerLexicalActorNode=a}),98);
__d("messengerMentionsLexicalCreateNodeStrategy",["MessengerLexicalActorNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(a,b,c,d,e,f,g){"use strict";a=c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){return d("MessengerLexicalActorNode").$createMessengerLexicalActorNode({id:a.key,text:c("cometMentionsDataEntryText")(a)})});b=a;g["default"]=b}),98);
__d("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport",["createCometMentionMatchStrategy"],(function(a,b,c,d,e,f,g){"use strict";var h=["@","\\uff20"].join(""),i=",\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>:;";function a(a){var b=a.disallowedTerms;a=a.minMatchLength;return c("createCometMentionMatchStrategy")({disallowedChars:i,disallowedTerms:b,minMatchLength:a,name:"CometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport("+a.toString()+")",triggers:h})}g["default"]=a}),98);
__d("useMWCMMentionsDataSourceResolverConfig",["I64","Int64Hooks","LSClearCommunityMembersAndRangeStoredProcedure","LSFactory","LSIssueCommunityMemberListFetchStoredProcedure","LSVec","Promise","asyncToGeneratorRuntime","createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport","pageID","promiseDone","react","useCometMentionsDataSourceResolverConfig","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=k||d("react");var l=e.useMemo,m=e.useRef;function a(a,e,f){var g=(i||(i=c("useReStore")))(),k=m(null),n=m([]),o=d("Int64Hooks").useCallbackInt64(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield g.runInTransaction(function(a){return c("LSClearCommunityMembersAndRangeStoredProcedure")(c("LSFactory")(a),{requestId:c("pageID"),source:(j||(j=d("I64"))).of_int32(8)})},"readwrite"),yield g.runInTransaction(function(f){return c("LSIssueCommunityMemberListFetchStoredProcedure")(c("LSFactory")(f),{communityId:a,fetchAdminsOnly:!1,fetchFriendMembersOnly:!1,maxName:"",maxTimestampMs:(j||(j=d("I64"))).zero,nextPageCursor:"",requestId:c("pageID"),roles:c("LSVec").ofArray([j.of_int32(0)]),searchText:b,source:j.of_int32(8),threadKey:e,threadRoles:c("LSVec").ofArray([])})},"readwrite")});return function(a){return f.apply(this,arguments)}}(),[g,a,e]),p=l(function(){return[{dataSource:{bootstrap:function(){},fetchCache:function(){return{entries:[],params:{query:""}}},fetchNetwork:function(a){return new(h||(h=b("Promise")))(function(b){(a.query!==k.current||a.query===""&&k.current!=="")&&(k.current=a.query,c("promiseDone")(o(k.current))),f.length!==0&&(n.current=f),b({entries:f.length===0?n.current:f,params:a})})}},matchStrategy:c("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport")({minMatchLength:0})}]},[f,o]);return c("useCometMentionsDataSourceResolverConfig")(p,!1)}g["default"]=a}),98);
__d("MWCMMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","I64","MWChatComposerMentionsViewItem.react","ReQL","ReQLSuspense","messengerMentionsLexicalCreateNodeStrategy","pageID","promiseDone","react","useCometTypeaheadViewListStrategy","useCommunityMembers","useMWCMMentionsDataSourceResolverConfig","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useEffect,m={view:{minWidth:"x1jzhcrs",$$css:!0}};function a(a){var b=a.editor,e=a.fbGroupId,g=a.folderId;a=a.threadFBID;var j=(h||(h=c("useReStore")))(),n=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(j.tables.community_members.index("communitySource")).getKeyRange(e,(i||(i=d("I64"))).of_int32(8),c("pageID")).filter(function(a){a=a.isBlocked;return a!==!0}).take(6).map(function(a){var b,c;b=(b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(j.tables.contextual_profile_v1).getKeyRange(a.contactId,g),f.id+":58"))==null?void 0:b.profileName;return{key:(i||(i=d("I64"))).to_string(a.contactId),label:(c=b)!=null?c:a.name,rawData:{photoURI:a.profilePictureUrl,source:"all",subtitle:b!=null?a.name:a.subtitle},type:"entry"}})},[j,e,g],f.id+":46");a=c("useMWCMMentionsDataSourceResolverConfig")(e,(i||(i=d("I64"))).of_string(a),n);n=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("MWChatComposerMentionsViewItem.react"),viewXStyle:m.view});var o=d("useCommunityMembers").useClearMemberList(8);l(function(){return function(){c("promiseDone")(o(c("pageID")))}},[o]);return k.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:a,editor:b,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:n})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatAppendMentionsNodeToReply",["I64","LSContactTypeExact","LSIntEnum","Lexical","LexicalText","MWChatComposerTypeaheadUtil","MWPReplyContext.react","MessengerLexicalActorNode","ReQL","ReQLSuspense","cometMentionsDataEntryText","react","usePrevious","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");var l=b.useContext,m=b.useEffect;function n(a,b){a.update(function(){var e=d("Lexical").$getSelection();if(!d("Lexical").$isRangeSelection(e)||!e.isCollapsed())return;var f=e.anchor;f=f.getNode();var g=c("cometMentionsDataEntryText")(b),h=d("Lexical").$getRoot().getAllTextNodes().some(function(a){return d("MessengerLexicalActorNode").$isMessengerLexicalActorNode(a)&&a.getTextContent().includes(g)});if(h===!0)return;h=d("MessengerLexicalActorNode").$createMessengerLexicalActorNode({id:b.key,text:g});var i=d("LexicalText").$isRootTextContentEmpty(a.isComposing());i?e.insertNodes([h]):f.insertBefore(h);h.selectNext(0,0)})}function a(a,b,e){var g=l(d("MWPReplyContext.react").MWPReplyContext),k=g.reply,o=c("usePrevious")(k),p=(h||(h=c("useReStore")))(),q=d("ReQLSuspense").useFirst(function(){return k!=null?d("ReQL").fromTableAscending(p.tables.messages).getKeyRange(b,k.timestampMs,k.messageId):d("ReQL").empty()},[k,b,p],f.id+":91");g=d("ReQLSuspense").useFirst(function(){return q!=null?d("ReQL").fromTableAscending(p.tables.contacts).getKeyRange(q.senderId):d("ReQL").empty()},[p,q],f.id+":102");g=g!=null?(i||(i=d("I64"))).equal(g.contactTypeExact,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT)):!1;var r=g&&(q==null?void 0:q.botResponseId)!=null;m(function(){var b=o==null&&k!=null;b&&r&&e===!0&&n(a,d("MWChatComposerTypeaheadUtil").aiBotMentionsEntry)},[a,k,o,r,e])}g.insertMentionNodeToFront=n;g.useMWChatAppendMentionsNodeToReply=a}),98);
__d("MWChatBusinessQuickReply.react",["CometImage.react","MDSTextPairing.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={image:{borderTopStartRadius:"x1z11no5",borderTopEndRadius:"xjy5m1g",borderBottomEndRadius:"x1mnwbp6",borderBottomStartRadius:"x4pb5v6","float":"xrbpyxo",height:"x158ke7r",marginTop:"x16ldp7u",marginEnd:"x1t4t16n",marginBottom:"xz62fqu",marginStart:"xbmpl8g",width:"x1kl0l3y",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"x1eb86dx",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",borderTopStyle:"x143s1ad",borderEndStyle:"xp3zfi1",borderBottomStyle:"x137oirg",borderStartStyle:"xojro6o",boxShadow:"x1vnslfi",boxSizing:"x9f619",cursor:"x1ypdohk",fontFamily:"xjb2p0i",fontWeight:"xk50ysn",justifyContent:"xl56j7k",marginTop:"xr9ek0c",marginEnd:"x1emribx",marginBottom:"xjpr12u",marginStart:"x1i64zmx",overflowWrap:"x1mzt3pk",paddingBottom:"x1a8lsjc",paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"x1ye3gou",paddingTop:"x889kno",textAlign:"x1yc453h",wordBreak:"x13faqbe",$$css:!0},vertical:{paddingBottom:"xsag5q8",paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"xr9oo41",$$css:!0}};function a(a){var b=a.bodyLineLimit;b=b===void 0?1:b;var d=a.imageUrl,e=a.onClick,f=a.quickReplyVertical;f=f===void 0?!1:f;a=a.text;var g=c("gkx")("24108");return j.jsx("div",{className:(h||(h=c("stylex")))(f?k.vertical:!1),children:j.jsxs("button",{className:"x6s0dn4 x1eb86dx xfh8nwu xoqspk4 x12v9rci x138vmkv x143s1ad xp3zfi1 x137oirg xojro6o x1vnslfi x9f619 x1ypdohk xjb2p0i xk50ysn xl56j7k xr9ek0c x1emribx xjpr12u x1i64zmx x1mzt3pk x1a8lsjc xn6708d x1ye3gou x889kno x1yc453h x13faqbe",onClick:e,children:[d!=null?j.jsx(c("CometImage.react"),{src:d,xstyle:k.image}):null,j.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:g?"blueLink":"primary",bodyLineLimit:b,level:3})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReplyText.react",["MWChatBusinessQuickReply.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.onSend,d=a.quickReply;a=a.quickReplyVertical;var e=a?3:1,f=function(){return b(d)},g=d.image_url;return i.jsx(c("MWChatBusinessQuickReply.react"),{bodyLineLimit:e,imageUrl:(e=g)!=null?e:void 0,onClick:f,quickReplyVertical:a,text:d.title})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserBirthdayQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4679476245513562"}),null);
__d("MWChatUserBirthdayQuery.graphql",["MWChatUserBirthdayQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"Date",kind:"LinkedField",name:"birthdate",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"day",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"month",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"year",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserBirthdayQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserBirthdayQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatUserBirthdayQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserBirthdayQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserBirthdayQuery",["CometRelay","MWChatUserBirthdayQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i="en-US";function j(a,b,c,d){c=new Date(c,b-1,a);return c.toLocaleDateString(d,{day:"numeric",month:"numeric",year:"numeric"})}a=function(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,k,{}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.user)==null?void 0:a.birthdate;if(a){var c=a==null?void 0:a.day,d=a==null?void 0:a.month;a=a==null?void 0:a.year;c!=null&&d!=null&&a!=null&&b(j(c,d,a,i))}});c("promiseDone")(e)}};var k=h!==void 0?h:h=b("MWChatUserBirthdayQuery.graphql");g.useUserBirthdayDataQuery=a}),98);
__d("MWChatBusinessQuickReplyUserBirthday.react",["MWChatBusinessQuickReply.react","MWChatUserBirthdayQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserBirthdayQuery").useUserBirthdayDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(function(a){return m(a)})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserEmailQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5146654855396537"}),null);
__d("MWChatUserEmailQuery.graphql",["MWChatUserEmailQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Email",kind:"LinkedField",name:"all_emails",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_primary",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserEmailQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserEmailQuery",selections:a},params:{id:b("MWChatUserEmailQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserEmailQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserEmailQuery",["CometRelay","MWChatUserEmailQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:a.viewer.all_emails;if(a&&a.length>0){var c=a.find(function(a){return a.is_primary});c!=null?b(c.display_email):b(a[0].display_email)}});c("promiseDone")(e)}};var i=h!==void 0?h:h=b("MWChatUserEmailQuery.graphql");g.useUserEmailDataQuery=a}),98);
__d("MWChatBusinessQuickReplyUserEmail.react",["MWChatBusinessQuickReply.react","MWChatUserEmailQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserEmailQuery").useUserEmailDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(m)},[a,g,m]);return l==null?null:i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:function(){return b({content_type:e.content_type,data:e.data,image_url:e.image_url,payload:e.payload,title:l})},quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserPhoneNumberQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5063442323698780"}),null);
__d("MWChatUserPhoneNumberQuery.graphql",["MWChatUserPhoneNumberQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"Phone",kind:"LinkedField",name:"all_phones",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_preferred",storageKey:null},{alias:null,args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"universal_number",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserPhoneNumberQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserPhoneNumberQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatUserPhoneNumberQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserPhoneNumberQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserPhoneNumberQuery",["CometRelay","MWChatUserPhoneNumberQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:a.viewer.user.all_phones;if(a&&a.length>0){var c=a.find(function(a){return a.is_preferred});if(c!=null){b((c=c.phone_number)==null?void 0:c.universal_number)}else{b((c=a[0].phone_number)==null?void 0:c.universal_number)}}});c("promiseDone")(e)}};var i=h!==void 0?h:h=b("MWChatUserPhoneNumberQuery.graphql");g.useUserPhoneNumberDataQuery=a}),98);
__d("MWChatBusinessQuickReplyUserPhoneNumber.react",["MWChatBusinessQuickReply.react","MWChatUserPhoneNumberQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserPhoneNumberQuery").useUserPhoneNumberDataQuery(),h=k(function(){}),l=h[0],m=h[1];j(function(){g(function(a){return m(function(){return a})})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserProfileLocationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7039613476103704"}),null);
__d("MWChatUserProfileLocationQuery.graphql",["MWChatUserProfileLocationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null}],storageKey:null}],type:"User",abstractKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserProfileLocationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserProfileLocationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatUserProfileLocationQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserProfileLocationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserProfileLocationQuery",["CometRelay","MWChatUserProfileLocationQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.actor)==null?void 0:(a=a.address)==null?void 0:a.region;a!=null&&a!==""&&b(a)});c("promiseDone")(e)}};e=function(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.actor)==null?void 0:a.address;a=a==null?void 0:a.postal_code;a!=null&&b(a)});c("promiseDone")(e)}};var i=h!==void 0?h:h=b("MWChatUserProfileLocationQuery.graphql");g.useUserProfileStateDataQuery=a;g.useUserProfileZipCodeDataQuery=e}),98);
__d("MWChatBusinessQuickReplyUserState.react",["MWChatBusinessQuickReply.react","MWChatUserProfileLocationQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserProfileLocationQuery").useUserProfileStateDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(function(a){return m(a)})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReplyUserZipCode.react",["MWChatBusinessQuickReply.react","MWChatUserProfileLocationQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserProfileLocationQuery").useUserProfileZipCodeDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(function(a){return m(a)})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReplyList.react",["Actor","CometScrollableArea.react","I64","LSIntEnum","LSQuickReplyType","MWChatBusinessQuickReplyText.react","MWChatBusinessQuickReplyUserBirthday.react","MWChatBusinessQuickReplyUserEmail.react","MWChatBusinessQuickReplyUserPhoneNumber.react","MWChatBusinessQuickReplyUserState.react","MWChatBusinessQuickReplyUserZipCode.react","MessengerWebEventsFalcoEvent","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useEffect,n={container:{position:"x1n2onr6",width:"xh8yej3",$$css:!0},mask:{backgroundColor:"x1eb86dx",$$css:!0},pillContainer:{backgroundColor:"x1eb86dx",display:"x78zum5",flexDirection:"x1q0g3np",flexWrap:"xozqiw3",paddingTop:"x1nn3v0j",paddingEnd:"x1sxyh0",paddingBottom:"x1a8lsjc",paddingStart:"xurb0ha",$$css:!0},pillContainerVertical:{alignItems:"xuk3077",backgroundColor:"x1eb86dx",display:"x78zum5",flexDirection:"xdt5ytf",paddingTop:"xm7lytj",$$css:!0}};function a(a){var b=a.arrayQR,e=a.id,f=a.onSend;a=a.quickReplyType;a=a===void 0?(j||(j=d("LSIntEnum"))).ofNumber(c("LSQuickReplyType").NONE):a;var g=(k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSQuickReplyType").VERTICAL));a=d("Actor").useActor();var i=a[0];m(function(){c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"render_quick_replies",other_user_fbid:e}})},[e]);return l.jsx("div",{className:"x1n2onr6 xh8yej3 x1eb86dx",children:l.jsx(c("CometScrollableArea.react"),{horizontal:!0,children:l.jsx("div",{className:(h||(h=c("stylex")))(g?n.pillContainerVertical:n.pillContainer),children:b.map(function(a,b){switch(a.content_type){case"text":return l.jsx(c("MWChatBusinessQuickReplyText.react"),{onSend:f,quickReply:a,quickReplyVertical:g},String(b));case"user_birthday":return l.jsx(c("MWChatBusinessQuickReplyUserBirthday.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_email":return l.jsx(c("MWChatBusinessQuickReplyUserEmail.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_phone_number":return l.jsx(c("MWChatBusinessQuickReplyUserPhoneNumber.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_state":return l.jsx(c("MWChatBusinessQuickReplyUserState.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_zip_code":return l.jsx(c("MWChatBusinessQuickReplyUserZipCode.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));default:return null}})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatComposerMentionsTypeaheadDataSource",["CurrentUser","MWChatComposerTypeaheadUtil","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=6;a=function(){function a(a,b,d,e,f){this.$1=[];this.$1=Array.from(a.values()).filter(function(a){return a.contactId!==c("CurrentUser").getID()});this.$2=b;this.$3=(a=d)!=null?a:null;this.$4=e;this.$5=f}var e=a.prototype;e.bootstrap=function(){return};e.fetchCache=function(a){return d("MWChatComposerTypeaheadUtil").fetchCacheComposerMentionsTypeahead(a,this.$1,this.$2,this.$3,this.$4,this.$5,i)};e.fetchNetwork=function(a){return(h||(h=b("Promise"))).resolve(this.fetchCache(a))};return a}();g["default"]=a}),98);
__d("MWChatFileIcon.react",["ix","MWXIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx("div",{className:"x6s0dn4 x2bj2ny x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xl56j7k xmo9yow x1y1aw1k x1sxyh0 xwib8y2 xurb0ha",children:j.jsx(c("MWXIcon.react"),{color:"primary",icon:d("fbicon")._(h("908355"),16)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatFilePreProcessingErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__rp1B2ks3qwV__JHASH__"),title:h._("__JHASH__Tgh_5naYWqz__JHASH__")};g.invalidFileFormat=a}),98);
__d("MWChatFileUploadErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return{body:h._("__JHASH__Tr8urrZ1rc1__JHASH__",[h._param("size",a)]),title:h._("__JHASH__GVmFuh2jycz__JHASH__")}};g.maxFileSizeExceeded=a}),98);
__d("MWCommandsComposerPluginCommandList",["fbt","ix","FBLogger","fbicon"],(function(a,b,c,d,e,f,g,h,i){"use strict";function a(a,b,c,d,e){b=b.toString();return{data:{decorType:"regular",handle:b,key:a,label:b,rawData:{icon:d,subtitle:c.toString()},type:"entry"},rangeType:e}}e=[a("silent",h._("__JHASH__fM-I8ly761K__JHASH__"),h._("__JHASH__bcTzx6eBHE9__JHASH__"),d("fbicon")._(i("549627"),16),"s")];f=e.map(function(a){return a.data});var j=e.reduce(function(a,b){var c;a[(c=b.data.handle)!=null?c:b.data.key]=b.rangeType;return a},{});function b(a){var b=j[a];if(b==null){c("FBLogger")("messenger_web_product").mustfix("Unregisted messenger composer command %s used. Please add the command to the mapping in MWCommandsComposerPluginCommandList",a);return"n"}return b}g.commands=f;g.commandToRangeType=b}),98);
__d("messengerCommandsLexicalCreateNodeStrategy",["MWCommandsComposerPluginCommandList","MWCommandsComposerPluginTextNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(a,b,c,d,e,f,g){"use strict";a=c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){var b;return d("MWCommandsComposerPluginTextNode").$createMessengerLexicalCommandNode({commandId:"0",commandPrefix:"/",handle:c("cometMentionsDataEntryText")(a),rangeType:d("MWCommandsComposerPluginCommandList").commandToRangeType((b=a.handle)!=null?b:a.key)})});b=a;g["default"]=b}),98);
__d("MWCommandsComposerPlugin.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","MWChatComposerMentionsViewItem.react","MWCommandsComposerPluginCommandList","Promise","createCometMentionMatchStrategy","messengerCommandsLexicalCreateNodeStrategy","react","useCometMentionsDataSourceResolverConfig","useCometTypeaheadViewListStrategy"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useMemo,l={view:{minWidth:"x1jzhcrs",$$css:!0}},m=function(){function a(){}var c=a.prototype;c.bootstrap=function(){return};c.fetchCache=function(a){return{entries:a.query.length===0?d("MWCommandsComposerPluginCommandList").commands:d("MWCommandsComposerPluginCommandList").commands.filter(function(b){return(b=b.handle)==null?void 0:b.startsWith(a.query)}),params:a}};c.fetchNetwork=function(a){return(h||(h=b("Promise"))).resolve(this.fetchCache(a))};return a}();function a(a){a=a.editor;var b=c("useCometMentionsDataSourceResolverConfig")(k(function(){return[{dataSource:new m(),matchStrategy:c("createCometMentionMatchStrategy")({minMatchLength:0,name:"MessengerCommandsMatchStrategy",triggers:"/"})}]},[]),!0),d=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("MWChatComposerMentionsViewItem.react"),viewXStyle:l.view});return j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerCommandsLexicalCreateNodeStrategy"),dataSourceResolverConfig:b,editor:a,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxHeaderPublicChatSubText.react",["fbt","CometMiddot.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.count;return j.jsxs(j.Fragment,{children:[h._("__JHASH__e_CSXZOMSHT__JHASH__"),j.jsx(c("CometMiddot.react"),{}),h._("__JHASH__auWIPhKvwTb__JHASH__",[h._plural(a,"number")])]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWSharedMediaManagerUtils",["I64","LSGetAttachmentType","LSIntEnum","LSMailboxType","MWPreloadableQueries","Promise","ReQLSuspense","asyncToGeneratorRuntime","justknobx","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){return new(k||(k=b("Promise")))(function(b){var c=new Image();c.onload=function(){return b({previewHeight:c.height,previewWidth:c.width})};c.onerror=function(){return b()};c.src=a})}function m(a){return new(k||(k=b("Promise")))(function(b){var c=document.createElement("video");c.onloadedmetadata=function(){return b({previewHeight:c.videoHeight,previewWidth:c.videoWidth})};c.onerror=function(){return b()};c.src=a})}function n(a,b){if(b==null||a==null)return;var c=Math.floor(a.previewHeight*b.previewWidth/a.previewWidth);return c>=b.previewHeight?{previewHeight:(i||(i=d("I64"))).of_float(c),previewWidth:i.of_float(b.previewWidth)}:{previewHeight:(i||(i=d("I64"))).of_float(b.previewHeight),previewWidth:i.of_float(a.previewWidth*b.previewHeight/a.previewHeight)}}function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=(yield (k||(k=b("Promise"))).all(e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];var e=URL.createObjectURL(b),g;c("justknobx")._("1704")===!0&&b.type.includes("video/")?g=(yield m(e)):g=(yield l(e));return[{attachmentType:c("LSGetAttachmentType")(b),durationMs:void 0,fbid:void 0,filename:b.name,fileSize:(i||(i=d("I64"))).of_int32(b.size),hasError:!1,isSent:!1,mailboxType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),mimeType:b.type,offlineAttachmentId:a,offlineThreadingId:void 0,previewUrl:e,progress:0,threadKey:f},g]});return function(b){return a.apply(this,arguments)}}())));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield a.sync_groups.get((i||(i=d("I64"))).of_float(1))),e;if((c==null?void 0:c.syncParams)!=null){c=JSON.parse(c.syncParams);var f=c.preview_height;c=c.preview_width;e={previewHeight:f,previewWidth:c}}yield (k||(k=b("Promise"))).all(g.map(function(b){var c=b[0];b=b[1];return a.media_staging.add(babelHelpers["extends"]({},c,n(b,e)))}))});return function(b){return a.apply(this,arguments)}}(),"readwrite")});return o.apply(this,arguments)}function e(a,b){return a.runInTransaction(function(a){return a.media_staging["delete"](b)},"readwrite")}function p(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").getMediaStagingQuery(b,a.threadKey)},[b,a.threadKey],f.id+":167")}g.insertMediaStaging=a;g.deleteMediaStaging=e;g.useMediaStaging=p}),98);
__d("MWMediaManager",["FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorDialog.react","MWChatFileUploadErrorDialog.react","MWPActor.react","MWSharedMediaManagerUtils","Promise","cr:8525","emptyFunction","gkx","promiseDone","qex","requireDeferred","useMWXAlertDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("MWOpenMediaManagerUtils").__setRef("MWMediaManager"),l=function(){if(b("cr:8525")==null){c("FBLogger")("messenger_web_product").warn("Unsupported thread type for media upload");return(j||(j=b("Promise"))).resolve(null)}return b("cr:8525").load()},m=c("gkx")("24138")?75:25;function n(a,d){if(d)if(c("qex")._("460")===!0)return l().then(function(c){return(j||(j=b("Promise"))).resolve((c=c==null?void 0:c.preprocessV2(a))!=null?c:[])});else return l().then(function(c){return(c=c==null?void 0:c.preprocess_DEPRECATED(a))!=null?c:(j||(j=b("Promise"))).resolve([])});else return k.load().then(function(b){return b.preprocess(a)})}function o(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],f=c(e,b);if(e.size>f*1024*1024)return f}return null}function a(a){var e=a.chatSupportUserId,f=a.chatSupportUserNonce,g=a.getMaxAttachmentSizeInMB,p=g===void 0?function(){return m}:g,q=a.isChatSupportUser,r=a.onUploadFailure,s=a.onUploadStart,t=a.onUploadSuccess,u=a.showUploadFailureToast,v=a.thread,w=(i||(i=c("useReStore")))(),x=c("useMWXAlertDialog")({onClose:c("emptyFunction")}),y=d("LSMessagingThreadTypeUtil").isSecure(v.threadType),z=d("MWSharedMediaManagerUtils").useMediaStaging(v),A=d("MWPActor.react").useActor();g=d("Int64Hooks").useCallbackInt64(function(a){var g=o(a,y,p);if(g!=null){x(d("MWChatFileUploadErrorDialog.react").maxFileSizeExceeded(g),c("emptyFunction"));return}c("promiseDone")(n(a,y)["catch"](function(){x(d("MWChatFilePreProcessingErrorDialog.react").invalidFileFormat,c("emptyFunction"));return(j||(j=b("Promise"))).resolve([])}).then(function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").insertMediaStaging(w,a,v.threadKey));var b=v.threadKey;return y?l().then(function(c){return c==null?void 0:c.upload(w,b,a)}):k.load().then(function(c){return c.upload(w,b,a,u,s,t,r,q,e,f,(h||(h=d("I64"))).to_string(A))})}))},[A,e,f,w,p,q,y,r,s,t,x,u,v.threadKey]);a=function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").deleteMediaStaging(w,a).then(function(){if(y&&b("cr:8525")!=null)return b("cr:8525").load().then(function(b){b.MAWMediaManagerAttachments["delete"](a)})}))};var B=function(){var a=z.map(function(a){return a.offlineAttachmentId});a.forEach(function(a){d("MWSharedMediaManagerUtils").deleteMediaStaging(w,a)["catch"](function(a){c("FBLogger")("MWMediaManager").catching(a).mustfix("Error deletting media staging.")})});y&&b("cr:8525")!=null&&c("promiseDone")(b("cr:8525").load().then(function(b){b.clearAttachments(a)}))};return{handleFileRemove:a,handleFileSelect:g,mediaStaging:z,resetAttachments:B}}g.useMediaManager=a}),98);
__d("MWMediaTraceHandler",["I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSDataTraceType","LSFactory","LSIntEnum","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return a.data_trace_meta.add({contextOne:void 0,contextThree:void 0,contextTwo:void 0,foregroundTimestampMs:(h||(h=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),predefinedId:void 0,shouldFlush:!1,traceId:b,traceType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK)})}function a(a,b,e,f){return j(a,b).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").RICH_MEDIA_UPLOAD_START),dataTraceId:b,syncChannel:(h||(h=d("I64"))).neg_one,tags:h.to_string(e)+","+h.to_string(f)})})}g.logMediaSendStart=a}),98);
__d("MWMessageListProtectedMedia.react",["fbt","$InternalEnum","MWLSThreadDisplayContext","MWVerticalRhythm","MWXPressable.react","MWXText.react","emptyFunction","react","setTimeout","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useMemo,m=e.useRef,n=e.useState,o=b("$InternalEnum").Mirrored(["Protected","Blurred","Unprotected"]),p={container:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",minHeight:"x7v6ubd",minWidth:"xfb3i0g",position:"x1n2onr6",$$css:!0},containerForInbox:{minWidth:"xlm99nl",$$css:!0},containerUncoverable:{minWidth:"xfb3i0g",$$css:!0},overlay:{maxWidth:"x193iq5w",":before_content":"x1gftdam",":before_height":"xw22vqi",":before_position":"x1te0kx0",":before_start":"x7r5wyf",":before_left":null,":before_right":null,":before_top":"x1ehtkf2",":before_width":"xy7dqi3",":before_zIndex":"x1wl4osp",$$css:!0},overlayBlurred:{filter:"xj2j9hd",$$css:!0},overlayDisabled:{pointerEvents:"x47corl",$$css:!0},pressable:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},sneezeguard:{backgroundColor:"x11dxs5c",height:"x5yr21d",position:"x10l6tqk",start:"x17qophe",left:null,right:null,top:"x13vifvy",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},sneezeguardTransparent:{backgroundColor:"x1cw4mn1",$$css:!0}};function q(a){var b=a.mediaType,d=a.state;a=a.uncoverable;a=a===void 0?!0:a;var e=h._("__JHASH__ffo2a6Rimy8__JHASH__"),f=h._("__JHASH__SmhjEO8LZM7__JHASH__"),g=h._("__JHASH__fSHhveuOoUn__JHASH__"),i=h._("__JHASH__9LbnXUNEOkH__JHASH__"),j=h._("__JHASH__grSMjsZRe9-__JHASH__"),l=h._("__JHASH__4a9auIct2D0__JHASH__"),m=h._("__JHASH___nqNxb75_gn__JHASH__"),n=h._("__JHASH__cegqh2566-V__JHASH__"),p=h._("__JHASH__NU6koyzdQfy__JHASH__");f=k.jsx(c("MWXText.react"),{color:"white",testid:void 0,type:"body3",children:b==="Image"?f:b==="Video"?e:g});return d===o.Unprotected?null:k.jsx("div",{"aria-live":"polite","aria-relevant":"all",className:"x6s0dn4 x9f619 x78zum5 xdt5ytf x5yr21d xl56j7k xyamay9 x1pi30zi x1l90r2v x1swvt13 x10l6tqk x17qophe x13vifvy xh8yej3 xhtitgo",children:k.jsx("div",{className:"x78zum5 xdt5ytf xurgmgr x2b8uid",children:d===o.Protected?k.jsxs(k.Fragment,{children:[f,a?k.jsxs(k.Fragment,{children:[k.jsx(c("MWVerticalRhythm"),{height:25}),k.jsx(c("MWXText.react"),{color:"white",testid:void 0,type:"bodyLink3",children:b==="Image"?j:b==="Video"?i:l})]}):null]}):k.jsxs(k.Fragment,{children:[f,k.jsx(c("MWVerticalRhythm"),{height:25}),k.jsx(c("MWXText.react"),{color:"white",testid:void 0,type:"bodyLink3",children:b==="Image"?n:b==="Video"?m:p})]})})},d)}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b=a.ariaLabel,e=a.children,f=a.linkProps,g=a.mediaType,h=a.onPress,j=h===void 0?c("emptyFunction"):h;h=a.overlayDisabled;h=h===void 0?!1:h;var r=a.testid,s=a.type;r=a.uncoverable;r=r===void 0?!0:r;var t=a.url;a=a.xstyle;var u=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),v=n(o.Protected),w=v[0],x=v[1],y=w===o.Unprotected;v=w===o.Blurred;var z=m(null),A=l(function(){return{url:"#"}},[]),B=l(function(){if(s==="video")return;if(t!=null)return{backgroundImage:"url("+t+")",backgroundSize:"cover",filter:"blur(10px)",height:"100%",left:"0",position:"absolute",right:"0",transform:"scale(1.2)",width:"100%"}},[t,s]);u=k.jsxs("div",{className:(i||(i=c("stylex")))(p.container,u==="Inbox"?p.containerForInbox:!1,r?p.containerUncoverable:!1),children:[k.jsx("div",{style:B}),k.jsx("div",{"aria-hidden":!y,className:i(p.overlay,!y&&p.overlayDisabled,v&&p.overlayBlurred),children:e}),y?null:k.jsx("div",{className:(i||(i=c("stylex")))(p.sneezeguard,v&&p.sneezeguardTransparent)}),k.jsx(q,{mediaType:g,state:w,uncoverable:r})]});return!r?k.jsx("div",{className:(i||(i=c("stylex")))(a,p.pressable),"data-testid":void 0,children:u}):k.jsx(c("MWXPressable.react"),{"aria-label":y?b:void 0,linkProps:y?f:A,onPress:function(){y?j():x(function(a){switch(a){case o.Protected:return o.Blurred;case o.Blurred:c("setTimeout")(function(){var a=z.current;if(a!=null)return a.focus()},0);return o.Unprotected;case o.Unprotected:return a}})},overlayDisabled:h,ref:z,testid:void 0,xstyle:[a,p.pressable],children:u})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPFetchMessagesPage",["FBLogger","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","LSMessagingThreadTypeUtil","asyncToGeneratorRuntime","gkx","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f,g,i,j,k,l){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,m;b=(yield (b=a.messages_ranges_v2__generated).get.apply(b,g));if(b==null||(f==="before"?b.isLoadingBefore:b.isLoadingAfter))return;m=j==null?null:yield (m=a.messages_ranges_v2__generated).get.apply(m,j);if(j!=null&&(m==null||(f==="before"?m.isLoadingBefore:m.isLoadingAfter)))return;if(f==="before")if(m==null||b.hasMoreBefore){var n=d("LSMessagingThreadTypeUtil").isSecure(i);if(n){if(l!=null)return l(a,b.threadKey,"before",e)}else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:b.minTimestampMs,threadKey:b.threadKey})}else{n=d("LSMessagingThreadTypeUtil").isSecure(c("nullthrows")(k));if(n){if(l!=null)return l(a,m.threadKey,"before",e)}else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:m.minTimestampMs,threadKey:m.threadKey})}else if(m==null||b.hasMoreAfter){n=d("LSMessagingThreadTypeUtil").isSecure(i);if(n)if(c("gkx")("23927")){if(l!=null)return l(a,b.threadKey,"after",e)}else throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:b.minTimestampMs,threadKey:b.threadKey})}else{n=d("LSMessagingThreadTypeUtil").isSecure(c("nullthrows")(k));if(n)if(c("gkx")("23927")){if(l!=null)return l(a,m.threadKey,"after",e)}else throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(h||(h=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:m.minTimestampMs,threadKey:m.threadKey})}});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui")}g["default"]=a}),98);
__d("MWPFetchMessagesPageV2",["FBLogger","I64","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","LSMessagingThreadTypeUtil","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c,d,e,f,g,h,i){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,i,j,k){var l,m;l=(yield (l=a.tables.messages_ranges_v2__generated).get.apply(l,f));if(l==null)return;m=h&&(yield (m=a.tables.messages_ranges_v2__generated).get.apply(m,h));if(m==null&&h!=null)return;h=d("LSMessagingThreadTypeUtil").isSecure(g);g=i!=null?d("LSMessagingThreadTypeUtil").isSecure(i):!1;if(e==="before")if(m==null||l.hasMoreBefore)if(h)return n(a,b,e,l,j,k);else return p(a,f,l.threadKey,e);else if(g)return n(a,b,e,m,j,k);else return p(a,[m.threadKey,m.minTimestampMs,m.minMessageId],m.threadKey,e);else{e;if(m==null||l.hasMoreAfter)if(h)throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return p(a,f,l.threadKey,e);else{g=d("LSMessagingThreadTypeUtil").isSecure(c("nullthrows")(i));if(g)throw c("FBLogger")("messenger_web_product").mustfix("Not possible to fetch more after for secure messages");else return p(a,[m.threadKey,m.minTimestampMs,m.minMessageId],m.threadKey,e)}}});return j.apply(this,arguments)}var k=new Map(),l=new Map();function m(a,b){var e=(h||(h=d("I64"))).to_string(b);return{lock:{after:function(){var b=f();b.after===!0&&c("FBLogger")("messenger_web_product").mustfix("Locking threadLockStatus twice");b.after=!0;a.set(e,b)},before:function(){var b=f();b.before===!0&&c("FBLogger")("messenger_web_product").mustfix("Locking threadLockStatus twice");b.before=!0;a.set(e,b)}},release:{after:function(){var b=f();b.after=!1;a.set(e,b)},before:function(){var b=f();b.before=!1;a.set(e,b)}},state:f()};function f(){var b=a.get(e);b==null&&(b={after:!1,before:!1},a.set(e,b));return b}}function n(a,b,c,d,e,f){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e,f){var g=m(k,d.threadKey);if(g.state[c])return;try{g.lock[c]();var h=(yield a.tables.messages.index("messageId").get(d.minMessageId));return yield f.fetchSecureMessagesProtocol(a,d.threadKey,h==null?void 0:h.primarySortKey,d,e,c,b)}finally{g.release[c]()}});return o.apply(this,arguments)}function p(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){f=m(l,f);if(f.state[g])return;try{f.lock[g]();return yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(yield (b=a.messages_ranges_v2__generated).get.apply(b,e));if(!b)return;if(b.isLoadingBefore&&g==="before")return;if(b.isLoadingAfter&&g==="after")return;return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(i||(i=d("LSIntEnum"))).ofNumber(g==="before"?c("LSMailboxMessagesRangeQueryDirection").BEFORE:c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:b.minTimestampMs,threadKey:b.threadKey})});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui")}finally{f.release[g]()}});return q.apply(this,arguments)}g["default"]=a}),98);
__d("MWPFetchMessagesRangeForMessage",["I64","LSFactory","LSMessagePointQueryStoredProcedure","WALoggerDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[occam] MWPFetchMessagesRangeForMessage: incorrect call to MPQ with secure mailbox"]);i=function(){return a};return a}function a(a,b,e,f){return a.runInTransaction(function(a){var g=(h||(h=d("I64"))).to_int32(f);(g===15||g===16)&&void d("WALoggerDeferred").ERROR(i());return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(a),{messageId:e,threadKey:b,threadType:f})},"readwrite","ui")}g["default"]=a}),98);
__d("MWPJumpToMostRecentMessageButtonAnimationWrapper.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useMemo,m=b.useState,n={animateIn:{animationDuration:"x5hsz1j",animationName:"x1j49z95",transform:"x1dufm33",$$css:!0},animateOut:{animationDuration:"x5hsz1j",animationName:"x1j4bph1",transform:"xk9af5f",$$css:!0},animationWrapper:{bottom:"x1ey2m1c",start:"x14yxtea",left:null,right:null,position:"x10l6tqk",zIndex:"x1vjfegm",$$css:!0},root:{height:"xqtp20y",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};function a(a){var b=a.children,d=a.visible;a=m(d);var e=a[0],f=a[1];k(function(){d&&f(!0)},[d,f]);return l(function(){return e?j.jsx("div",{className:"xqtp20y x1n2onr6 xh8yej3",children:j.jsx("div",{className:(h||(h=c("stylex")))([n.animationWrapper,d?n.animateIn:n.animateOut]),onAnimationEnd:function(a){d||f(!1)},children:b})}):null},[d,e,f,b])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWScrollUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){a.scrollIntoView()}f.scrollElementIntoView=a}),66);
__d("useMWMarkThreadAsReadWhenNewMessagesArrive",["I64","Int64Hooks","MWLSThreadDisplayContext","MWV2IsTabFocusedContext.react","ReQL","ReQLObservable","UserActivity","asyncToGeneratorRuntime","cr:268","emptyFunction","gkx","promiseDone","react","useMWInboxPassiveContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useCallback,l=(e=b("cr:268"))!=null?e:c("emptyFunction");function m(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.table("messages")).getKeyRange(b)));if(h==null)return!1;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(b)));if(a==null)return!1;b=g!==void 0?g==="ChatTab"?e:g==="Inbox"&&c("gkx")("24041")?!f.isPassive:!0:!0;e=(j||(j=d("I64"))).gt(h.timestampMs,a.lastActivityTimestampMs)?h.timestampMs:a.lastActivityTimestampMs;g=(j||(j=d("I64"))).gt(e,a.lastReadWatermarkTimestampMs);return c("UserActivity").isOnTab()&&c("UserActivity").isActive()&&b&&g});return n.apply(this,arguments)}function o(a,e){var f=(h||(h=c("useReStore")))(),g=d("MWV2IsTabFocusedContext.react").useIsTabFocused(),i=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),j=c("useMWInboxPassiveContext")();return k(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(yield m(f,a,g,j,i))return e()})())},[f,a,g,j,i,e])}function p(a,e,f,g){var i=(h||(h=c("useReStore")))();d("Int64Hooks").useEffectInt64(function(){var c=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=a();typeof b!=="boolean"&&(b=(yield b));if(b&&!e())return f()});return function(){return c.apply(this,arguments)}}();window.addEventListener("focus",c);document.hasFocus()&&void c();var h=d("ReQLObservable").create(i,function(){return d("ReQL").fromTableDescending(i.table("messages")).getKeyRange(g)}).subscribe({next:c});return function(){window.removeEventListener("focus",c),h.unsubscribe()}},[f,a,e,g,i])}function a(a,b,c,d){b=o(a.threadKey,b);l(a);p(c,d,b,a.threadKey);return b}g["default"]=a}),98);
__d("useMWPSafelyMarkThreadAsRead",["I64","Int64Hooks","LSFactory","LSMessagingThreadTypeUtil","LSOptimisticMarkThreadReadV2StoredProcedure","ServerTime","cr:5552","promiseDone","useMAWMarkThreadAsRead","useMWMarkThreadAsReadWhenNewMessagesArrive","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g){var j=(i||(i=c("useReStore")))(),k=a.threadKey,l=a.threadType,m=c("useMAWMarkThreadAsRead")(a),n=b("cr:5552")({entryPoint:g,threadKey:k,threadType:l});g=d("Int64Hooks").useCallbackInt64(function(){n==null?void 0:n();if(d("LSMessagingThreadTypeUtil").isSecure(l)){m();return}c("promiseDone")(j.runInTransaction(function(a){return c("LSOptimisticMarkThreadReadV2StoredProcedure")(c("LSFactory")(a),{readWatermarkTimestampMs:(h||(h=d("I64"))).of_float(d("ServerTime").getMillis()),threadKey:k})},"readwrite","ui"))},[j,n,m,k,l]);return c("useMWMarkThreadAsReadWhenNewMessagesArrive")(a,g,e,f)}g["default"]=a}),98);
__d("useMWPMessageListScroll",["MWPVisibleMessageContext.react","MWScrollUtils","Promise","react","requestAnimationFrame","useMWPSafelyMarkThreadAsRead"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.createRef,k=e.useCallback,l=e.useEffect,m=e.useImperativeHandle,n=e.useRef,o=e.useState;function p(a,b,c){var d=a.get(b);d==null&&(d=c(),a.set(b,d));return d}function a(a,e,f,g,i,q,r,s,t,u){var v=n(null),w=n(!1),x=k(function(){if(!u)return;if(q==null||w.current)return;q(!1);w.current=!0},[q,u]);l(function(){var a;if(q==null||w.current)return;if(g!=null&&!g.hasMoreBefore){q(!0);w.current=!0;return}i&&i((a=(a=v.current)==null?void 0:a.getScrollerMeasurements())!=null?a:void 0,g===f);a=(a=v.current)==null?void 0:a.doesContentFillScroll;if(a==null)return;if(a()){q(!1);w.current=!0;return}},[q,g,i,f]);var y=o(!0),z=y[0],A=y[1],B=(g==null?void 0:g.hasMoreAfter)===!1;y=k(function(){return new(h||(h=b("Promise")))(function(a){var b=v.current;b==null?a(!1):c("requestAnimationFrame")(function(){a(b.isAtBottom()&&B)})})},[B]);var C=c("useMWPSafelyMarkThreadAsRead")(t,y,a,e);l(function(){var b;b=(b=v.current)==null?void 0:b.onCloseToBottom;if(b!=null)return b(0,function(b){b&&!a()&&C()})},[C,a]);l(function(){var a;a=(a=v.current)==null?void 0:a.onCloseToBottom;if(a!=null&&r!=null)return a(36,r)},[r]);l(function(){var a;a=(a=v.current)==null?void 0:a.onCloseToBottom;if(a!=null)return a(600,A)},[f==null?void 0:f.minMessageId]);var D=n(new Map());t=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var E=t.setVisibleMessage;y=t.visibleMessage;var F=y==null?void 0:y.messageId;e=k(function(a){return p(D.current,a,j)},[]);var G=k(function(){g===f&&(v.current!=null&&v.current.scrollToBottom()),E(function(){return void 0})},[f,g,E]);l(function(){var a;if(F==null)return;a=(a=D.current.get(F))==null?void 0:a.current;a!=null&&d("MWScrollUtils").scrollElementIntoView(a)},[F]);m(s,function(){return{getScrollAreaElement:function(){var a;return(a=v.current)==null?void 0:a.getScrollAreaElement()},jumpToMostRecentMessage:function(){G()},restoreScrollPosition:function(){var a;return(a=v.current)==null?void 0:a.restoreScrollPosition()}}},[G]);return[z,v,G,e,x]}g["default"]=a}),98);
__d("MWPBaseMessageList.react",["BaseHeadingContextWrapper.react","Box.react","CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessageRenderingType","LSMessagingThreadTypeUtil","MAWFetchMoreMessagesWhenEnabled","MWPFetchMessagesPage","MWPFetchMessagesPageV2","MWPFetchMessagesRangeForMessage","MWPJumpToMostRecentMessageButtonAnimationWrapper.react","MWPMessageAuthor.react","MWPVisibleMessageContext.react","ReQL","ReQLPaginatedList.react","ReQLPaginatedList.shared","ReQLSuspense","RelayHooks","cr:8795","emptyFunction","gkx","promiseDone","react","useMWPMessageListScroll","useReStore","useShallowEqualState"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),aa=i.useCallback,ba=3,ca=(e=c("MAWFetchMoreMessagesWhenEnabled")==null?void 0:c("MAWFetchMoreMessagesWhenEnabled").useFetchSecureMessages)!=null?e:function(a){return void 0},da=(e=c("MAWFetchMoreMessagesWhenEnabled")==null?void 0:c("MAWFetchMoreMessagesWhenEnabled").useSecureDataStorage)!=null?e:function(){return void 0},m={list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",isolation:"xc8icb0",overflowX:"x6ikm8r",overflowY:"x10wlt62",zIndex:"x1ja2u2z",$$css:!0},spacer:{backgroundColor:"x1eb86dx",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",$$css:!0}},n=(k||(k=d("I64"))).of_string("9999999999999");function o(a){var b=a.isCollapsed,c=a.messageId,e=a.primarySortKey;a=a.secondarySortKey;return d("ReQL").key(e,a,c,b)}function ea(a,b){if(a==null||b==null)return;return(k||(k=d("I64"))).compare(b,a.maxTimestampMs)<=0?a:null}function p(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return a==null||(k||(k=d("I64"))).equal(a.minTimestampMs,(k||(k=d("I64"))).zero)?d("ReQL").empty():d("ReQL").fromTableAscending(b.table("messages"),["isCollapsed","messageId","primarySortKey","secondarySortKey"]).getKeyRange(a.threadKey).bounds({gte:d("ReQL").key(a.minTimestampMs,a.minMessageId)})},[b,a],f.id+":145")}function fa(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return a==null||(k||(k=d("I64"))).equal(a.maxTimestampMs,n)?d("ReQL").empty():d("ReQL").fromTableDescending(b.table("messages"),["isCollapsed","messageId","primarySortKey","secondarySortKey","timestampMs"]).getKeyRange(a.threadKey).bounds({lte:d("ReQL").key(a.maxTimestampMs,a.maxMessageId)})},[b,a],f.id+":171")}e=l.forwardRef(a);function a(a,e){var g,i=a.checkIsThreadManuallySetAsUnread;i=i===void 0?c("emptyFunction").thatReturnsFalse:i;var q=a.entryPoint,ga=a.headerStyle,ha=a.isSufficientContentLoadedAbove,r=a.logScrollerMetadata,s=a.onInitialLoadingCompleted,t=a.onScrollToBottom,ia=a.onUserScroll,u=a.pageSize,ja=a.renderFooter,v=a.renderHeader,w=a.renderHeaderContentSpacer,x=a.renderJumpToMostRecentMessageButton,y=a.renderLoadingAnimation,z=a.renderRow,A=a.secondaryThread,B=a.setScrollTopInResetForBottomAnchor;B=B===void 0?!0:B;var C=a.thread;a=a.triggerRenderingCompleteOnResize;a=a===void 0?!1:a;var D=C.threadKey,E=C.threadType,ka=d("LSMessagingThreadTypeUtil").isSecure(E),F=A==null?void 0:A.threadKey,G=A==null?void 0:A.threadType,H=(h||(h=c("useReStore")))(),I=ca(E),J=da(),K=d("RelayHooks").useActorID(),la=b("cr:8795")(K,H,D,E,((g=u)!=null?g:c("gkx")("23432"))?3:15),L=d("Int64Hooks").useCallbackInt64(function(a,b,d){(c("gkx")("33120")||c("gkx")("33121"))&&J!=null?c("promiseDone")(c("MWPFetchMessagesPageV2")(H,void 0,d,a,E,b,G,K,J)):c("promiseDone")(c("MWPFetchMessagesPage")(H,void 0,d,a,E,b,G,I))},[H,G,I,E,J,K]),M=d("Int64Hooks").useCallbackInt64(function(a){c("promiseDone")(c("MWPFetchMessagesRangeForMessage")(H,D,a,E))},[H,D,E]),N=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(H.table("messages_ranges_v2__generated")).getKeyRange(D)},[H,D],f.id+":299");g=d("ReQLSuspense").useFirst(function(){return F==null?d("ReQL").empty():d("ReQL").fromTableDescending(H.table("messages_ranges_v2__generated")).getKeyRange(F)},[H,F],f.id+":306");var O=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();O=O.visibleMessage;var P=O==null?void 0:O.messageId,Q=O==null?void 0:O.timestamp,R=d("ReQLSuspense").useFirst(function(){return P!=null&&Q!=null?d("ReQL").fromTableAscending(H.table("messages"),["isCollapsed","messageId","primarySortKey","secondarySortKey"]).getKeyRange(D,Q,P):d("ReQL").empty()},[H,D,P,Q],f.id+":321"),S=ea(d("ReQLSuspense").useFirst(function(){return Q!=null?d("ReQL").fromTableDescending(H.table("messages_ranges_v2__generated")).getKeyRange(D).bounds({lte:[Q]}):d("ReQL").empty()},[H,Q,D],f.id+":334"),Q);O=c("useShallowEqualState")({displayMessage:void 0,displayMessagesRange:N});var T=O[0],U=O[1];O=T.displayMessage;T=T.displayMessagesRange;d("Int64Hooks").useEffectInt64(function(){P==null||Q==null?U(function(a){return babelHelpers.extends({},a,{displayMessage:void 0,displayMessagesRange:N})}):S==null?M(P):S.minMessageId===P&&S.hasMoreBefore?L(d("ReQL").key(S.threadKey,S.minTimestampMs,S.minMessageId),null,"before"):S.maxMessageId===P&&S.hasMoreAfter?L(d("ReQL").key(S.threadKey,S.minTimestampMs,S.minMessageId),null,"after"):R!=null&&U(function(a){return babelHelpers.extends({},a,{displayMessage:R,displayMessagesRange:S})})},[N,L,M,U,R,P,Q,S]);var V=p(T),W=fa(T),X=p(g);i=c("useMWPMessageListScroll")(i,q,N,T,r,s,t,e,C,a);q=i[0];r=i[1];s=i[2];var Y=i[3];t=i[4];e=d("Int64Hooks").useMemoInt64(function(){var a=H.table("messages").index("messageDisplayOrder"),b=d("LSMessagingThreadTypeUtil").isCMSubthread(E),e=H.table("messages").index("messageSubthreadKey");function f(a,b){var e=a.getKeyRange(D).filter(function(a){var b=a.isCollapsed;a=a.messageRenderingType;return!b&&!(k||(k=d("I64"))).equal(a,(k||(k=d("I64"))).of_int32(c("LSMessageRenderingType").HIDDEN))});return F==null?b!=null?d("ReQL").union(d("ReQL").prependKey(b.getKeyRange(D),0),d("ReQL").prependKey(e,1)):d("ReQL").prependKey(e,1):d("ReQL").union(d("ReQL").prependKey(a.getKeyRange(F).filter(function(a){a=a.isCollapsed;return!a}),0),d("ReQL").prependKey(e,1))}var g=f(d("ReQL").fromTableAscending(a),b?d("ReQL").fromTableAscending(e):void 0);f=f(d("ReQL").fromTableDescending(a),b?d("ReQL").fromTableDescending(e):void 0);return d("ReQLPaginatedList.shared").fromIterables(g,f)},[H,F,D,E]);a=T!=null&&(k||(k=d("I64"))).equal(T.maxTimestampMs,n);i=T!=null&&(k||(k=d("I64"))).equal(T.minTimestampMs,(k||(k=d("I64"))).zero);var ma=g!=null&&(k||(k=d("I64"))).equal(g.minTimestampMs,(k||(k=d("I64"))).zero),na=aa(function(a,b){var e=b.nextItem;b=b.previousItem;return l.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_view",disableHidding:!0,children:l.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:a.senderId,threadKey:a.threadKey,children:z({domElementRef:Y(a.messageId),message:a,nextMessage:e,prevMessage:b})})},a.offlineThreadingId)},[Y,z]),Z=(k||(k=d("I64"))).equal(C.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&d("LSMessagingThreadTypeUtil").isCMSubthread(C.threadType);if((T==null||V==null&&!i||W==null&&!a)&&!Z){if((k||(k=d("I64"))).equal(C.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)))return l.jsxs(l.Fragment,{children:[l.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-optimisticThread",hold:!0}),v!=null?v():null]});C=T==null?"displayMessagesRangeNull":V==null&&!i?"noMinMessage":W==null&&!a?"noMaxMessage":"other";return l.jsxs(l.Fragment,{children:[l.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-"+C,hold:!0}),y!=null?y():null]})}var $=!Z&&T!=null?d("ReQL").key(T.threadKey,T.minTimestampMs,T.minMessageId):null,oa=g==null?null:d("ReQL").key(g.threadKey,g.minTimestampMs,g.minMessageId);i=O==null?"bottom":[1].concat(o(O));a=V==null?X==null||ma?null:[0].concat(o(X)):[1].concat(o(V));C=W==null?null:[1].concat(o(W));return l.jsxs(c("Box.react"),{xstyle:m.list,children:[l.jsx(c("BaseHeadingContextWrapper.react"),{children:l.jsx(c("ReQLPaginatedList.react"),{bounds:{gte:a,lte:C},data:e,hasReachedBottom:!Z&&T!=null?!T.hasMoreAfter:!0,hasReachedTop:!Z&&T!=null?g==null?!(T.hasMoreBefore||A!=null):!(T.hasMoreBefore||g.hasMoreBefore):!0,headerStyle:ga,holdTriggerElementsCount:ba,imperativeRef:r,initialAnchor:i,initialRenderComplete:t,isSufficientContentLoadedAbove:ha,onPageLoaded:function(a,b,c){if(!ka)return;if(a!=="top")return;la(b,c)},onReachingBottom:!Z&&$!=null?function(){L($,oa,"after")}:c("emptyFunction"),onReachingTop:!Z&&$!=null?function(){return L($,oa,"before")}:c("emptyFunction"),onUserScroll:ia,pageSize:u,renderFooter:ja,renderHeader:v,renderHeaderContentSpacer:w!=null?w:function(){return l.jsx(c("Box.react"),{xstyle:m.spacer})},renderItem:na,renderLoadingAnimation:y,setScrollTopInResetForBottomAnchor:B,xstyle:m.list})}),x&&l.jsx(c("MWPJumpToMostRecentMessageButtonAnimationWrapper.react"),{visible:!Z&&T!=null?!q||T.hasMoreAfter:!1,children:x(s)})]})}a.displayName=a.name+" [from "+f.id+"]";a=e;g.default=a}),98);
__d("MWPComposerDraftMessages",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a,b){if(b==null){i["delete"]((h||(h=d("I64"))).to_string(a));return}i.set((h||(h=d("I64"))).to_string(a),b)}function b(a){return i.get((h||(h=d("I64"))).to_string(a))}g.updateDraftMessage=a;g.getDraftMessage=b}),98);
__d("MWPNewMessageDraftContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useRef,l=e();function a(a){a=a.children;var b=k("");return i.jsx(l.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(l)}g.MWPNewMessageDraftContextProvider=a;g.useNewMessageDraftContext=b}),98);
__d("MWPQuickReplies.react",["FBLogger","I64","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWChatBusinessQuickReplyList.react","MWPActor.react","MessagePowerUp","Promise","ReQL","ReQLSuspense","promiseDone","react","useLSMessagingSource","useReStore","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||d("react");function n(a){var e=a.lastMessageId,g=a.quickReplyType,l=a.threadKey,n=c("useLSMessagingSource")(),o=(i||(i=c("useReStore")))(),p=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(o.table("quick_reply_ctas")).getKeyRange(l,e).map(function(a){var b=a.type_,d=b==="quick_reply_text"||b==="quick_reply_ad"?"text":b==="quick_reply_phone"?"user_phone_number":b==="quick_reply_email"?"user_email":"";d===""&&c("FBLogger")("messenger_web_product").mustfix("Unexpected quick-reply type: %s, title: %s",b,a.title);return{content_type:d,data:void 0,image_url:a.imageUrl,payload:a.platformToken,title:a.title}}).filter(function(a){return a.content_type!==""})},[o,e,l],f.id+":50");if(a.length>0)return m.jsx(c("MWChatBusinessQuickReplyList.react"),{arrayQR:a,id:(j||(j=d("I64"))).to_string(p),onSend:function(a){var e=d("LSThreadAttributionTypeUtil").getSource(l,n);c("promiseDone")(o.runInTransaction(function(f){var g;g=(g=a.payload)!=null?g:void 0;return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(f),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,mark_read:!0,platform_token:g,power_up_style:(k||(k=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:k.ofNumber(c("LSMessageReplySourceType").NONE),reply_source_type_v2:k.ofNumber(c("LSMessageReplySourceTypeV2").NONE),snippet_has_emoji:!1,source:e}),mailboxType:k.ofNumber(c("LSMailboxType").MESSENGER),senderId:p,text:a.title,threadKey:l,threadType:k.ofNumber(1)}).then(function(a){return(h||(h=b("Promise"))).resolve(a)})},"readwrite"))},quickReplyType:g});else return null}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.threadKey,e=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(e.tables.messages).getKeyRange(b)},[e,b],f.id+":138");if(a!=null)return m.jsx(n,{lastMessageId:a.messageId,quickReplyType:a.quickReplyType,threadKey:b});else return null}a.displayName=a.name+" [from "+f.id+"]";e=d("withCometPlaceholder").withCometPlaceholder(a);g["default"]=e}),98);
__d("MWPSendMessageLogger",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MWLogSend").__setRef("MWPSendMessageLogger");function a(a,b,c,d,e,f,g,i){h.onReady(function(h){return h.log({actor:c,attachmentFbids:e,attachmentType:g,backend:0,hasReply:i,offlineThreadingId:d,sendType:0,source:f,threadKey:a,threadType:b})})}g.log=a}),98);
__d("MWPThreadGradientBackground.react",["BaseTheme.react","MWPColorUtils","gkx","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l={container:{backgroundPosition:"x1xsqp64",backgroundSize:"x18d0r48",display:"x78zum5",flexBasis:"x1r8uery",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"xmz0i5r",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}};function m(){var a=k(),b=a[0],e=a[1];a=c("useMWPThreadTheme")();var f=a.backgroundGradientColors,g=a.outgoingGradientColors;a=a.threadTheme;var h=a.backgroundUrl;a=a.fallbackColor;j(function(){if(h==null||!c("gkx")("24125"))return;var a=!1,b=new Image();b.src=h;b.onload=function(){if(a)return;e(h)};return function(){a=!0}},[h]);if(h!=null&&c("gkx")("24125")){if(h===b)return{backgroundImage:"url("+h+")"};if(f.length>1)return{backgroundImage:d("MWPColorUtils").gradient(f)};else{return{backgroundColor:d("MWPColorUtils").int64ToHex((f=f==null?void 0:(b=f[0])==null?void 0:b.color)!=null?f:a)}}}if(g.length>1)return{backgroundImage:d("MWPColorUtils").gradient(g)}}function a(a){var b;a=a.children;return i.jsx(c("BaseTheme.react"),{style:(b=m())!=null?b:{},xstyle:l.container,children:a})}a.displayName=a.name+" [from "+f.id+"]";g.MWPThreadGradientBackground=a}),98);
__d("MWPreloadedText",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a({text:null});g["default"]=b}),98);
__d("useMWChatMentionsDataSourceResolverConfig",["I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWChatComposerMentionsTypeaheadDataSource","MWLSThread","createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport","react","useCometMentionsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useMemo;function a(a){var b=a.isAiBotMentionsEnabled,e=a.participants,f=a.threadFBID,g=a.triggerParticipantsSearch;a=d("MWLSThread").useThreadExn((i||(i=d("I64"))).of_string(f));var h=d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&d("LSThreadBitOffset").has(43,a);a=j(function(){return[{dataSource:new(c("MWChatComposerMentionsTypeaheadDataSource"))(e,f,g,b,h),matchStrategy:c("createCometAtSignComposerMentionsMatchStrategyWithInstagramHandleSupport")({minMatchLength:0})}]},[h,b,e,f,g]);return c("useCometMentionsDataSourceResolverConfig")(a,!0)}g["default"]=a}),98);
__d("MessengerMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","I64","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWChatAppendMentionsNodeToReply","MWChatComposerMentionsViewItem.react","MWLSThread","cr:2600","cr:4183","messengerMentionsLexicalCreateNodeStrategy","react","useCometTypeaheadSectionedViewListStrategy","useCommunityFolder","useMWChatMentionsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useMemo,l=(e=b("cr:4183"))!=null?e:function(a){return function(a,b){}},m={view:{minWidth:"x1jzhcrs",$$css:!0}};function a(a){var e=a.editor,f=a.isAiBotMentionsEnabled,g=a.participants,h=a.threadFBID,n=l((i||(i=d("I64"))).of_string(h));a=k(function(){return{isAiBotMentionsEnabled:f,participants:g,threadFBID:h,triggerParticipantsSearch:n}},[f,g,h,n]);a=c("useMWChatMentionsDataSourceResolverConfig")(a);var o=c("useCometTypeaheadSectionedViewListStrategy")({viewItemStrategyRenderer:c("MWChatComposerMentionsViewItem.react"),viewXStyle:m.view}),p=d("MWLSThread").useThreadExn(i.of_string(h)),q=c("useCommunityFolder")(p);d("MWChatAppendMentionsNodeToReply").useMWChatAppendMentionsNodeToReply(e,p.threadKey,f);if(b("cr:2600")!=null&&(d("MWCMThreadTypes.react").isJoinedCMThread(p.threadType)&&q||d("LSMessagingThreadTypeUtil").isJoinedSocialChannelV2(p.threadType))){var r;return j.jsx(b("cr:2600"),{editor:e,fbGroupId:(r=q==null?void 0:q.fbGroupId)!=null?r:p.threadKey,folderId:(r=q==null?void 0:q.folderId)!=null?r:p.threadKey,threadFBID:h})}else return j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:a,editor:e,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:o})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWReQLComposerInner.react",["CometMessengerComposerInner.react","I64","MWLSThread","MessengerMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.ariaDescribedBy,e=a.contentEditableRef,f=a.editor,g=a.endContent,h=a.handlePastedFiles,k=a.isAiBotMentionsEnabled,l=a.isSecureThread,m=a.participants,n=a.placeholderText;n=n===void 0?"Aa":n;var o=a.policyProduct,p=a.startContent,q=a.surface,r=a.testId,s=a.threadID,t=a.topContent;a=a.useMentionsPlugin;var u=d("MWLSThread").useThread((i||(i=d("I64"))).of_string(s),function(a){return a.threadSubtype});a=a&&j.jsx(c("MessengerMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react"),{editor:f,isAiBotMentionsEnabled:k,participants:m,threadFBID:s});return j.jsx(c("CometMessengerComposerInner.react"),{ariaDescribedBy:b,contentEditableRef:e,editor:f,endContent:g,handlePastedFiles:h,isSecureThread:l,mentionsPlugin:a,placeholderText:n,policyProduct:o,startContent:p,threadSubtype:u,topContent:t,surface:q,testId:r})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatComposerGetViewContent",["Lexical","MessengerLexicalActorNode","MessengerLexicalEntityTextNode","cr:3101","cr:6138"],(function(a,b,c,d,e,f,g){"use strict";var h=b("cr:3101")||b("cr:6138");a={getRanges:function(a){var b=[],c=0;a.getEditorState().read(function(){var a=d("Lexical").$getRoot().getFirstChild();a instanceof d("Lexical").ElementNode&&a.getChildren().forEach(function(a){if(d("MessengerLexicalEntityTextNode").isMessengerLexicalEntityTextNode(a)){var e=a.getEntity();b.push({id:e.id,length:a.getTextContent().length,offset:c,type:d("MessengerLexicalActorNode").$isMessengerLexicalActorNode(a)?a.getRangeType():"p"})}if(h!=null&&a instanceof h.MessengerLexicalCommandNode){e=a.getEntity();b.push({id:e.commandId,length:a.getTextContent().length,offset:c,type:a.getRangeType()})}c+=a.getTextContent().length})});return b}};c=a;g["default"]=c}),98);
__d("MWV2ComposerActionsContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;c=b.createContext;var j=b.useContext,k=b.useMemo,l=c({});function a(a){var b=a.children,c=a.onMessageSendAttempt;a=j(l);var d=a.onMessageSendAttempt;a=k(function(){return{onMessageSendAttempt:function(a){d==null?void 0:d(a),c==null?void 0:c(a)}}},[d,c]);return i.jsx(l.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ComposerActionsContext=l;g.MWV2ComposerActionsListener=a}),98);
__d("MWV2ComposerEmojiButton.react",["fbt","JSResourceForInteraction","MWChatComposerIcons","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","Promise","gkx","promiseDone","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=h._("__JHASH__HXazdxq92Fj__JHASH__"),m={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},n=c("JSResourceForInteraction")("cometAddEmojiToComposerForLexical").__setRef("MWV2ComposerEmojiButton.react");function a(a){var e=a.editor;a=function(a){c("promiseDone")(n.load().then(function(c){c(a,e,16);return(i||(i=b("Promise"))).resolve()}))};var f=c("MessengerWebUXLogger").useInteractionLogger();return k.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{onSelect:a,withArrow:!0},popoverResource:c("JSResourceForInteraction")("MWV2ComposerEmojiPickerForJSResource").__setRef("MWV2ComposerEmojiButton.react"),preloadTrigger:c("gkx")("22922")?"button":void 0,children:function(a,b,e,g,h,i,j){return k.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:l,children:k.jsx(c("MWXPressable.react"),{"aria-label":l,onHoverIn:g,onHoverOut:h,onPress:function(a){b(),n.preload(),f==null?void 0:f({eventName:"composer_open_emoji_picker"})},onPressIn:i,overlayRadius:"50%",ref:a,testid:void 0,xstyle:function(){return[c("gkx")("23219")?m.buttonMDS:m.buttonFDS]},children:k.jsx(d("MWChatComposerIcons").MWChatComposerIconsEmoji,{fill:"var(--chat-composer-button-color)",size:20})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerFileButton.react",["fbt","CometFileSelector.react","MWChatComposerIcons","MWXPressable.react","MWXTooltip.react","gkx","react","useMWV2ComposerOnFilesSelected"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},l=h._("__JHASH__irWVZkNfl97__JHASH__");function a(a){var b=a.disabled,e=a.onAttachmentsAdded;a=a.supportedFileTypes;e=c("useMWV2ComposerOnFilesSelected")(e);return j.jsx(c("CometFileSelector.react"),{accept:a,multiple:!0,onFilesSelected:e,children:function(a){return j.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:l,children:j.jsx(c("MWXPressable.react"),{"aria-label":l,disabled:b,loggingEvent:"composer_open_file_picker",onPress:a,overlayRadius:"50%",testid:void 0,xstyle:function(){return[c("gkx")("23219")?k.buttonMDS:k.buttonFDS]},children:j.jsx(d("MWChatComposerIcons").MWChatComposerIconsPhoto,{fill:b?void 0:"var(--chat-composer-button-color)",size:20})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerMediaStagingItem.react",["fbt","ix","CometImageCover.react","I64","LSIntEnum","MWChatFileIcon.react","MWV2ComposerMediaProgressBar.react","MWXCircleButton.react","MWXIconCross","MWXImage.react","MWXText.react","MessagingAttachmentType","react","stylex"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=k||(k=d("react")),o=k.useCallback,p={button:{end:"xoo4vsp",left:null,right:null,position:"x10l6tqk",top:"x1v4kod4",$$css:!0},file:{alignItems:"x6s0dn4",display:"x78zum5",paddingStart:"xurb0ha",paddingLeft:null,paddingRight:null,paddingEnd:"x1sxyh0",paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",userSelect:"x87ps6o",$$css:!0},fileContainer:{width:"x2pejg6",$$css:!0},fileContent:{flexGrow:"x1iyjqo2",$$css:!0},filePreviewContainer:{backgroundColor:"x1vtvx1t",width:"x2pejg6",$$css:!0},itemContainer:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",height:"xsdox4t",marginTop:"xr9ek0c",marginEnd:"xq8finb",marginBottom:"xzueoph",marginStart:"x1mh8g0r",position:"x1n2onr6",width:"x1useyqa",$$css:!0},playIcon:{marginStart:"x16hk5td",marginLeft:null,marginRight:null,marginTop:"x7wgvq7",position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,top:"xwa60dl",$$css:!0},previewContainer:{borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",height:"xsdox4t",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"x1useyqa",$$css:!0},video:{objectFit:"xl1xv1r",$$css:!0}};function a(a){var b=a.mediaStaging,e=a.onAttachmentRemoved;a=o(function(){return e(b.offlineAttachmentId)},[b.offlineAttachmentId,e]);var f=!(l||(l=d("I64"))).equal(b.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))&&!(l||(l=d("I64"))).equal(b.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))&&!q(b);return n.jsxs("div",{className:(j||(j=c("stylex")))(p.itemContainer,f&&p.fileContainer),"data-testid":void 0,children:[n.jsxs("div",{className:j(p.previewContainer,f&&p.filePreviewContainer),children:[n.jsx(r,{mediaStaging:b}),n.jsx(c("MWV2ComposerMediaProgressBar.react"),{height:4,mediaStaging:b})]}),n.jsx("div",{className:"xoo4vsp x10l6tqk x1v4kod4",children:n.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:h._("__JHASH__JpwWRvbxl3y__JHASH__"),onPress:a,size:24,type:"overlay"})})]})}a.displayName=a.name+" [from "+f.id+"]";function q(a){if(a.mimeType==="image/gif")return!0;else return a.mimeType==="image/webp"}function r(a){a=a.mediaStaging;var b=a.attachmentType,e=a.previewUrl;if(q(a)||(l||(l=d("I64"))).equal(b,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))if(e!=null)return n.jsx(c("CometImageCover.react"),{alt:"",src:e});else return null;if((l||(l=d("I64"))).equal(b,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))if(e!=null)return n.jsxs(n.Fragment,{children:[n.jsx("video",{className:"xl1xv1r",height:"48",src:e,width:"48"}),n.jsx("div",{className:"x16hk5td x7wgvq7 x10l6tqk xtzzx4i xwa60dl",children:n.jsx(c("MWXImage.react"),{src:i("354763")})})]});else return null;return n.jsxs("div",{className:"x6s0dn4 x78zum5 xurb0ha x1sxyh0 x1iorvi4 xjkvuk6 x87ps6o",children:[n.jsx(c("MWChatFileIcon.react"),{}),n.jsx("div",{className:"x1iyjqo2",children:n.jsx(c("MWXText.react"),{numberOfLines:2,type:"headline4",children:a.filename})})]})}r.displayName=r.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerMediaStaging.react",["fbt","ix","CometFileSelector.react","MWV2ComposerMediaStagingItem.react","MWXIcon.react","MWXPressable.react","fbicon","react","useMWV2ComposerOnFilesSelected"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={container:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",flexWrap:"xozqiw3",justifyContent:"x1nhvcw1",overflowX:"xw2csxc",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",width:"xh8yej3",$$css:!0},uploadPlaceholderRoot:{alignItems:"x6s0dn4",backgroundColor:"x1vtvx1t",borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",display:"x78zum5",flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",height:"xsdox4t",justifyContent:"xl56j7k",marginEnd:"xq8finb",marginLeft:null,marginRight:null,position:"x1n2onr6",width:"x1useyqa",$$css:!0}};function m(a){var b=a.onAttachmentsAdded;a=a.supportedFileTypes;b=c("useMWV2ComposerOnFilesSelected")(b);return k.jsx(c("CometFileSelector.react"),{accept:a,multiple:!0,onFilesSelected:b,children:function(a){return k.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__Mhonj9wa21Q__JHASH__"),onPress:function(){return a()},xstyle:l.uploadPlaceholderRoot,children:k.jsx(c("MWXIcon.react"),{color:"primary",icon:d("fbicon")._(i("481777"),24),testid:void 0})})}})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.mediaStaging,d=a.onAttachmentRemoved,e=a.onAttachmentsAdded;a=a.supportedFileTypes;return b.length===0?null:k.jsxs("div",{className:"x6s0dn4 x9f619 x78zum5 xozqiw3 x1nhvcw1 xw2csxc xz9dl7a xn6708d xsag5q8 x1ye3gou xh8yej3",children:[k.jsx(m,{onAttachmentsAdded:e,supportedFileTypes:a}),b.map(function(a){return k.jsx(c("MWV2ComposerMediaStagingItem.react"),{mediaStaging:a,onAttachmentRemoved:d},a.offlineAttachmentId)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerSendButton.react",["fbt","Locale","MWChatChatButtonColorConstants","MWXPressable.react","MWXTooltip.react","UserAgent","gkx","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");b=c("gkx")("23402");e=c("UserAgent").isPlatform("Mac OS X");var l=b?e?h._("__JHASH__rZOmP6eifIV__JHASH__"):h._("__JHASH__ylwhpFdWk4l__JHASH__"):h._("__JHASH__7975gRkNyLl__JHASH__"),m={buttonFDS:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},buttonMDS:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",marginStart:"x1i64zmx",marginLeft:null,marginRight:null,marginEnd:"x1emribx",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},reverse:{transform:"xpk2tj9",$$css:!0}};function a(a,b){var e=a.disabled;a=a.onPress;return k.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:l,children:k.jsx(c("MWXPressable.react"),{disabled:e,label:l,loggingEvent:"composer_send_message",onPress:a,overlayDisabled:e,overlayRadius:"50%",ref:b,testid:void 0,xstyle:function(){return[c("gkx")("23219")?m.buttonMDS:m.buttonFDS,d("Locale").isRTL()&&m.reverse]},children:k.jsxs("svg",{className:(i||(i=c("stylex")))(d("MWChatChatButtonColorConstants").styles.fillGrey),height:"20px",viewBox:"0 0 24 24",width:"20px",children:[k.jsx("title",{children:l}),k.jsx("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",fill:"var(--chat-composer-button-color)"})]})})})}a.displayName=a.name+" [from "+f.id+"]";b=k.forwardRef(a);g["default"]=b}),98);
__d("MWV2FileDropzone.react",["fbt","LSFactory","LSIssueNewErrorStoredProcedure","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWXText.react","cometIsMimeTypeForMedia","gkx","promiseDone","react","recoverableViolation","stylex","useFileDragEvents","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;e=b.createContext;var m=b.createElement,n=b.useCallback,o=b.useRef,p=e({current:{enabled:!0,handler:null}});function q(a){var b=a.children;a=a.fileUploadHandlerConfigRef;return m(p.Provider,{children:b,value:a})}var r={dropzone:{alignItems:"x6s0dn4",backgroundColor:"x1h0vfkc",bottom:"x1ey2m1c",display:"x78zum5",end:"xds687c",left:null,right:null,justifyContent:"xl56j7k",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",zIndex:"x1vjfegm",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxWidth:"x193iq5w",minHeight:"x2lwn1j",position:"x1n2onr6",$$css:!0}};function s(a){if(a==null)return[];a=a.dataTransfer;return a==null?[]:a.types}function t(a){switch(a){case 0:return void 0;case 1:return h._("__JHASH__M7mGXjgzxvT__JHASH__").toString();default:return h._("__JHASH__UaK2GgtSNQH__JHASH__").toString()}}function u(a,b){var d=t(b);if(d==null)return;c("promiseDone")(a.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:d,errorTitleText:d})},"readwrite"))}function v(a){a=a.type;return d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a)||d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a)?!0:a.startsWith("audio/")}var w=new Set(["text/plain","text/html","text/uri-list"]);function a(a){var b=a.children,e=a.isDisabled,f=a.isMediaOnly,g=a.thread;a=a.xstyle;var k=o({enabled:!1,handler:null}),m=o(null),p=(i||(i=c("useReStore")))(),t=g!=null?(d("MWCMThreadTypes.react").isBroadcastThread(g.threadType)||d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(g.threadType)||d("LSMessagingThreadTypeUtil").isAiBot(g.threadType))&&!d("LSThreadBitOffset").has(56,g):!1;g=!c("gkx")("24132");var x=e===!0||g||t;e=function(a){var b;return((b=k.current)==null?void 0:b.handler)==null?!1:!s(a).some(function(a){return w.has(a)})};g=c("useFileDragEvents")(function(){return!1},void 0,e);e=n(function(a){var b;if(((b=k.current)==null?void 0:b.enabled)===!1)return;b=(b=k.current)==null?void 0:b.handler;if(b==null){if(!t){var d=k.current==null?"fileUploadHandlerConfigRef was not setup to handle dropped file!":"fileUploadHandlerConfigRef.current.handler was not setup to handle dropped file";c("recoverableViolation")(d,"messenger_comet")}return}d=Array.from(a);a=f?d.filter(v):d;d.length!==a.length&&u(p,d.length);!x&&a.length!==0&&b(a)},[f,x,t,p]);c("useFileDragEvents")(e,m.current,function(a){return!0});return l.jsxs("div",{className:(j||(j=c("stylex")))(r.root,(e=a)!=null?e:!1),ref:m,children:[l.jsx(q,{fileUploadHandlerConfigRef:k,children:b}),!x&&g?l.jsx("div",{className:"x6s0dn4 x1h0vfkc x1ey2m1c x78zum5 xds687c xl56j7k x10l6tqk x17qophe x13vifvy x1vjfegm",children:l.jsx(c("MWXText.react"),{type:"body1",children:h._("__JHASH__Cpq0daihgaG__JHASH__")})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g.mWV2FileDropzoneContext=p;g.MWV2FileDropzone=a}),98);
__d("MWV2MessageProfilePhotoMenuQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6825449144230575"}),null);
__d("ReQLSubscribe",["ErrorGuard","ReQL","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){a=a.take(1);var e=(h||(h=c("ErrorGuard"))).guard(b),f=!1,g=null,i=a.subscribe(function(a,b){if(f)return;switch(b.operation){case"delete":(g==null||g.current!==void 0)&&(g={current:void 0},e(g.current));return;case"add":case"put":((a=g)==null?void 0:a.current)!==b.value&&(g={current:b.value},e(g.current))}});c("promiseDone")(d("ReQL").firstAsync(a),function(a){!f&&g==null&&(g={current:a},e(a))});return function(){f||(f=!0,i==null?void 0:i())}}g.subscribeToFirst=a}),98);
__d("MWV2SetupS2SLoggingShared",["I64","LSIntEnum","MWChatInteraction","MWLSLogSend","MWVersion","ReQL","ReQLSubscribe","asyncToGeneratorRuntime","err","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){d("sendToSentQPLLogger").markSendToSentPoint(a,"received_successful_server_ack"),d("sendToSentQPLLogger").markSendToSentSuccess(a),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function k(a,b){d("sendToSentQPLLogger").markSendToSentFail(a,c("err")("fail_to_send_message")),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function l(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"sending_message")}function a(a){var c=a.db,e=a.initiatingSource,f=a.isCommunityEvent,g=a.isMessageRequest,m=a.s2sInstanceKey,n=a.threadType,o=a.traceSendMessageAPI,p={initiatingSource:e,isCommunityEvent:f,isMessageRequest:g,mwVersion:d("MWVersion").v2,threadType:n};return function(a){d("MWLSLogSend").logSentHeroInteraction(o,a,p);d("MWChatInteraction").set(d("MWChatInteraction").s2sKey(a),String(m));d("sendToSentQPLLogger").addSendToSentAnnotations(m,{string:babelHelpers["extends"]({},d("MWLSLogSend").getMessageSendAnnotations(p))});d("sendToSentQPLLogger").addSendToSentAnnotations(m,{bool:{subscription_points_gk:!0}});var e=!1,f=d("ReQL").fromTableAscending(c.tables.messages.index("optimistic")).getKeyRange(a),g=d("ReQLSubscribe").subscribeToFirst(f,function(b){b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))?(e=!0,j(m,a),g()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(4))?(e=!0,k(m,a),g()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(1))&&l(m)});window.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!e){var a=(yield d("ReQL").firstAsync(f));e||d("sendToSentQPLLogger").addSendToSentAnnotations(m,{string:{status_after_10s:a?""+(i||(i=d("LSIntEnum"))).toNumber(a.sendStatusV2):"none"}})}}),1e4);window.setTimeout(function(){g()},6e4)}}g["default"]=a}),98);
__d("MWXIconLike",["MWXSvgIcon","SVGIcon","cr:7434","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:7434")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXUseLatch",["CometThrottle","Run","debounce","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo;function a(a,b,e){var f=b!=null?b:!1;i(function(){if(!f)return;var b=d("Run").onUnload(function(){return a(!1)});return function(){return b.remove()}},[f,a]);return j(function(){var b={contents:!1},d=c("debounce")(function(){if(!b.contents)return a(!1)},e|0),f=c("CometThrottle")(function(){return a(!0)},3e3,{leading:!0,trailing:!1}),g=function(){a(!1),b.contents=!0},h=function(){f();return d()};return[h,g]},[a,e])}g.useLatch=a}),98);
__d("MessagingLoggingUtils",["I64","MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=(h||(h=d("I64"))).to_int32(a);switch(a){case c("MessagingAttachmentType").NONE:return 1;case c("MessagingAttachmentType").STICKER:return 4;case c("MessagingAttachmentType").IMAGE:return 8;case c("MessagingAttachmentType").ANIMATED_IMAGE:return 6;case c("MessagingAttachmentType").VIDEO:return 10;case c("MessagingAttachmentType").AUDIO:return 11;case c("MessagingAttachmentType").FILE:return 9;case c("MessagingAttachmentType").XMA:return 13;case c("MessagingAttachmentType").EPHEMERAL_IMAGE:return 8;case c("MessagingAttachmentType").EPHEMERAL_VIDEO:return 5;case c("MessagingAttachmentType").SELFIE_STICKER:return 22;case c("MessagingAttachmentType").SOUND_BITE:return 23;default:return 1}}g.convertI64ToAttachmentType=a}),98);
__d("mwpLexicalCreateEditor",["CometLexicalEmojiNode","FBLogger","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","cr:3101","cr:6138","mlcErrorHandler__INTERNAL"],(function(a,b,c,d,e,f,g){"use strict";e=b("cr:3101")||b("cr:6138");var h=[d("MessengerLexicalActorNode").MessengerLexicalActorNode,d("CometLexicalEmojiNode").EmojiNode,e==null?void 0:e.MessengerLexicalCommandNode],i=babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"xat24cr xdj266r"});function a(a){var b,e=d("Lexical").createEditor({namespace:"MWPEditor",nodes:(b=a==null?void 0:a.nodes)!=null?b:h.filter(Boolean),onError:function(a){return c("mlcErrorHandler__INTERNAL")(a,e,function(b){c("FBLogger")("messenger_web_product").catching(a).mustfix("Lexical Error MWP: %s",b)})},theme:(b=a==null?void 0:a.theme)!=null?b:i});return e}g["default"]=a}),98);
__d("useMWComposerAriaDescribedBy",["fbt","I64","Int64Hooks","MWPActor.react","ReQL","ReQLSuspense","intlList","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){var b=a.threadKey,e=a.threadName,g=(j||(j=c("useReStore")))(),k=d("MWPActor.react").useActor(),l=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(g.tables.participants,["contactId"]).getKeyRange(b).map(function(a){return d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(a.contactId),f.id+":33")})},[g,b],f.id+":28");return d("Int64Hooks").useMemoInt64(function(){if(e!=null)return h._("__JHASH__AZYBx6Ry0lI__JHASH__",[h._param("name of conversation",e)]);var a=c("intlList")(l.map(function(a){if(a!=null&&!(i||(i=d("I64"))).equal(a.id,k))return a.name}).filter(Boolean),c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA);return h._("__JHASH__a-kg7czmDb1__JHASH__",[h._param("participant list",a)])},[l,e,k])}g["default"]=a}),98);
__d("useMWLSSaveDrafts",["CometDebounce","Int64Hooks","LexicalText","MWPComposerDraftMessages","MWPNewMessageDraftContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.editor,e=a.isPreviewThread,f=a.threadKey,g=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),h=i(function(a){e&&g!=null?g.current=a:d("MWPComposerDraftMessages").updateDraftMessage(f,a)},[e,g,f]);d("Int64Hooks").useEffectInt64(function(){return b.registerUpdateListener(c("CometDebounce")(function(a){a=a.editorState;a=a.read(function(){return d("LexicalText").$rootTextContent()});h(a)},{wait:250}))},[b,h]);d("Int64Hooks").useEffectInt64(function(){var a=b.getEditorState().read(function(){return d("LexicalText").$rootTextContent()});h(a)},[b,h])}g["default"]=a}),98);
__d("useMWPCometComposerPrepopulateDraftMessage",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b,c){i(function(){if(b==null||c)return;a.update(function(){if(b!=null){var a=d("Lexical").$getRoot(),c=a.getFirstChild();d("Lexical").$isParagraphNode(c)||(c=d("Lexical").$createParagraphNode(),a.append(c));a=d("Lexical").$createTextNode(b);c.clear();c.append(a)}})},[a,c])}g["default"]=a}),98);
__d("useMWPComposerAutoFocus",["MWChatFocusComposerContext","MWPReplyContext.react","MWV2IsTabFocusedContext.react","deepEquals","react","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect;function l(a){var b;b=(b=document.activeElement)==null?void 0:(b=b.attributes.getNamedItem("id"))==null?void 0:b.value;if(b==null?void 0:b.includes("prevent-composer-focus-steal"))return;return a.focus(function(){})}function a(a){var b=a.editor,e=a.focusEditorDelayed,f=a.hasUnsentAttachments,g=f===void 0?!1:f;f=a.isPreviewThread;f=f===void 0?!1:f;var h=a.isQuickchat;a=d("MWChatFocusComposerContext").useMWChatFocusComposer();a=a.setFocusComposer;var m=j(d("MWPReplyContext.react").MWPReplyContext),n=m.reply,o=c("usePrevious")(n);k(function(){(o==null?n!=null:!c("deepEquals")(o,n))&&(h&&e?e(b):l(b))},[b,n,o,e,h]);m=d("MWV2IsTabFocusedContext.react").useIsTabFocused();var p=m&&!f;k(function(){p&&(h&&e?e(b):l(b))},[b,p,e,h]);k(function(){g&&(h&&e?e(b):l(b))},[b,g,e,h]);a(i(function(){h&&e?e(b):l(b)},[b,e,h]))}g["default"]=a}),98);
__d("useMWPComposerEditorDraftText",["MWPComposerDraftMessages","MWPNewMessageDraftContext.react","MWPreloadedText","react","useMWLSSaveDrafts","useMWPCometComposerPrepopulateDraftMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(a){var b=a.editor,e=a.isPreviewThread;e=e===void 0?!1:e;var f=a.isQuickchat;f=f===void 0?!1:f;a=a.threadKey;var g=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),h=i(c("MWPreloadedText"));h=h.text!=null?h.text:g!=null?g.current:d("MWPComposerDraftMessages").getDraftMessage(a);c("useMWLSSaveDrafts")({editor:b,isPreviewThread:e,threadKey:a});c("useMWPCometComposerPrepopulateDraftMessage")(b,h,f);return h}g["default"]=a}),98);
__d("useMWPLexicalClearEditor",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b){b===void 0&&(b=!1),i(function(){return a.registerCommand(d("Lexical").CLEAR_EDITOR_COMMAND,function(){a.update(function(){var a=d("Lexical").$getRoot(),c=d("Lexical").$getSelection(),e=d("Lexical").$createParagraphNode();a.clear();a.append(e);c!==null&&(e.select(),b===!0&&d("Lexical").$isRangeSelection(c)&&(c.format=0))});return!0},d("Lexical").COMMAND_PRIORITY_EDITOR)},[b,a])}g["default"]=a}),98);
__d("useMWPLexicalCommitMessageOnEnter",["Lexical","MLCInstrumentationCommands","MLCKeyBindingUtil","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b){i(function(){return a.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(e){e=e;if(e!=null&&!e.shiftKey&&!e.altKey&&(!c("gkx")("23402")||d("MLCKeyBindingUtil").hasCommandModifier(e))){e.preventDefault();a.dispatchCommand(d("MLCInstrumentationCommands").COMMIT_COMMAND,"create");b();return!0}return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[a,b])}g["default"]=a}),98);
__d("useMWXLexicalHasText",["LexicalText","react"],(function(a,b,c,d,e,f,g){"use strict";var h;c=h||d("react");var i=c.useCallback,j=c.useEffect,k=c.useRef,l=c.useState;function m(a){return a.getEditorState().read(d("LexicalText").$isRootTextContentEmptyCurry(a.isComposing()))}function n(a){var b=l(function(){return!m(a)}),c=b[0],d=b[1];j(function(){return a.registerUpdateListener(function(){d(!m(a))})},[a]);return c}function a(a){var b=a.editor;a=a.initialValue;var c=k(a);return{useHasText:i(function(){var a,d=k((a=c.current)!=null?a:!1);j(function(){d.current=!1},[]);return n(b)||d.current},[b])}}function b(a){var b=a.editor;a=a.initialValue;a=k(a);var c=k((a=a.current)!=null?a:!1);j(function(){c.current=!1},[]);return n(b)||c.current}g.useMWXLexicalHasText_DEPRECATED=a;g.useMWXLexicalHasText=b}),98);
__d("useMWXLexicalOnTypingChanged",["LexicalText","MWXUseLatch","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a){var b=a.editor;a=a.onTypingStateChanged;a=d("MWXUseLatch").useLatch(a,!0,5e3);var c=a[0],e=a[1],f=j("");i(function(){var a=function(a){a=a.editorState.read(function(){return d("LexicalText").$rootTextContent()});if(a!==f.current){f.current=a;if(a==="")return e();else return c()}};return b.registerUpdateListener(a)},[c,e,b]);return{}}g["default"]=a}),98);
__d("useMWPComposerEditor",["I64","Int64Hooks","Lexical","LexicalText","MWChatMessagesOnChatTabLoadTracker","MWPComposerDraftMessages","MWV2ChatComposerGetViewContent","MWV2ComposerActionsContext.react","MWV2ComposerHasContentContext.react","WALoggerDeferred","cr:7101","emptyFunction","mwpLexicalCreateEditor","promiseDone","react","useLexicalInitializeEditor__DEPRECATED","useMWPComposerAutoFocus","useMWPComposerEditorDraftText","useMWPLexicalClearEditor","useMWPLexicalCommitMessageOnEnter","useMWXLexicalHasText","useMWXLexicalOnTypingChanged"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=h||d("react");var j=e.useContext,k=e.useEffect,l=e.useMemo,m=e.useRef,n=b("cr:7101")==null?function(a){}:b("cr:7101").useMWComposerKeyCommandFocusRegister,o=[];function p(){c("promiseDone")(d("WALoggerDeferred").logWithTags(["MWPComposerEditor","Composer"],["Calling onSendMessage"],"LOG"))}var q=function(a){return a.read(function(){return d("LexicalText").$rootTextContent()})};function a(a){var b=a.customizedRanges,e=a.getTextFromEditorState,f=e===void 0?q:e;e=a.isPreviewThread;e=e===void 0?!1:e;var g=a.isSendDisabled;g=g===void 0?!1:g;var h=a.mediaStaging;h=h===void 0?o:h;var r=a.onSendMessage,s=a.onTypingStateChanged,t=a.threadKey,u=a.clearFormatAfterSend,v=a.isQuickchat;v=v===void 0?!1:v;var w=a.focusEditorDelayed,x=a.editorNodes,y=a.editorTheme;a=m(null);var z=l(function(){return c("mwpLexicalCreateEditor")({nodes:x,theme:y})},[x,y]);h=h.length>0;c("useLexicalInitializeEditor__DEPRECATED")(z);c("useMWPLexicalClearEditor")(z,u);c("useMWPComposerAutoFocus")({editor:z,focusEditorDelayed:w,hasUnsentAttachments:h,isPreviewThread:e,isQuickchat:v});u=c("useMWPComposerEditorDraftText")({editor:z,isPreviewThread:e,isQuickchat:v,threadKey:t});var A=d("useMWXLexicalHasText").useMWXLexicalHasText({editor:z,initialValue:u!=null&&u!==""}),B=A||h;w=d("MWV2ComposerHasContentContext.react").useComposerHasContext();var C=w.hasContentRef;k(function(){if(C==null)return;C.current=A},[A,C]);c("useMWXLexicalOnTypingChanged")({editor:z,onTypingStateChanged:s});e=j(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var D=e.onMessageSendAttempt;v=d("Int64Hooks").useCallbackInt64(function(){D==null?void 0:D(B);z.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND);if(!B)return;d("MWChatMessagesOnChatTabLoadTracker").trackSendFor(t);p();var a=b!=null?b(z,(i||(i=d("I64"))).to_string(t)):c("MWV2ChatComposerGetViewContent").getRanges(z),e=z.getEditorState();e=f(e);r(e,a);d("MWPComposerDraftMessages").updateDraftMessage(t,"");z.focus()},[B,r,t,b,z,f,D]);u=g?c("emptyFunction"):v;c("useMWPLexicalCommitMessageOnEnter")(z,u);n(a.current);return{editor:z,editorElementRef:a,hasStuffToSend:B,sendMessage:u}}g["default"]=a}),98);
__d("useMWUIECPCheckoutDialog",["FBP2MECPCheckoutDialog.entrypoint","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return c("useMWXEntryPointDialog")(c("FBP2MECPCheckoutDialog.entrypoint"),{orderID:a,pageID:b})}g["default"]=a}),98);
__d("useMWV2FileDropzoneRegisterHandler",["MWV2FileDropzone.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(d("MWV2FileDropzone.react").mWV2FileDropzoneContext);j(function(){var c={enabled:!0,handler:a};b.current=c;return function(){c.enabled=!1,c.handler=null}},[b,a])}g["default"]=a}),98);
__d("useMWV2SendOpenMessageImplShared",["ArmadilloDataTraceCheckPoint","I64","Int64Hooks","LSAppendDataTraceAddonStoredProcedure","LSAuthorityLevel","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","MWPActor.react","MWPReplyContext.react","MessagePowerUp","MultipleTabsLogger","asyncToGeneratorRuntime","gkx","react","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext;function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).minus_one,tags:b}))});return m.apply(this,arguments)}function a(a){var e=a.authorityLevel,f=a.onOptimisticMessageCreation,g=a.pluginType,h=a.skipUrlPreviewGen,m=a.threadKey,n=a.threadType,o=d("MWPActor.react").useActor();a=k(d("MWPReplyContext.react").MWPReplyContext);var p=a.reply,q=c("useLSMessagingInitiatingSource")();return d("Int64Hooks").useCallbackInt64(function(a){var k=a.afterSend,r=a.attributionAppId,s=a.dataTraceId,t=a.externalAttachmentUrl,u=a.hotEmojiSize,v=a.logSendPoint,w=a.mentionData,x=a.messageText,y=a.messageTypeParams,z=a.optimisticAttachmentPreview,A=a.platformToken,B=a.profileRanges,C=a.richTextFormatType,D=a.s2sInstanceKey,E=a.setupS2SLogging,F=a.source,G=a.stickerID;a=a.transaction;return H(a);function H(a){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=c("LSFactory")(a),H=c("gkx")("24135");yield l(a,(i||(i=d("I64"))).to_string(m),s);a=(yield d("MultipleTabsLogger").hasMultipleTabs());var I=y.hasAttachment,J=y.hasGif,K=y.hasLinks,L=y.hasSticker,M=y.hasText;b=(yield c("LSOptimisticSendMessageV2StoredProcedure")(b,{extraSendMessageParams:d("LSShape").ofRecord({attribution_app_id:r,calculate_denormalizations:!1,data_trace_id:(b=s)!=null?b:void 0,external_attachment_url:t,hot_emoji_size:u,initiating_source:q,mark_read:i.ge(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),mention_data:w,multitab_env:a,optimistic_attachment_preview:z,platform_token:A,plugin_type:g,power_up_style:j.ofNumber(c("MessagePowerUp").NONE),qpl_instance_key:D==null?void 0:D.toString(),reply_source_id:p==null?void 0:p.messageId,reply_source_type:p!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:p!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,rich_text_format_type:C,skip_url_preview_gen:h,source:F,sticker_id:G,text_has_links:K&&H}),mailboxType:j.ofNumber(c("LSMailboxType").MESSENGER),senderId:o,text:x,threadKey:m,threadType:n}));v("create_optimistic_message_success");if(!I){a=b[0];E(a)}f!=null&&f({TAG:0,hasLink:K,hasMention:B!=null&&B.length>0,isGIF:J,isReply:!!(p&&p.messageId!==""),isSticker:L,isText:M,offlineThreadingId:b[0]});H=b[0];k!=null&&k(H);return b});return I.apply(this,arguments)}},[m,q,e,g,p,h,o,n,f])}g["default"]=a}),98);
__d("useMWV2SendOpenMessageImpl",["useMWV2SendOpenMessageImplShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.onOptimisticMessageCreation,d=a.pluginType,e=a.skipUrlPreviewGen;a=a.thread;return c("useMWV2SendOpenMessageImplShared")({authorityLevel:a.authorityLevel,onOptimisticMessageCreation:b,pluginType:d,skipUrlPreviewGen:e,threadKey:a.threadKey,threadType:a.threadType})}g["default"]=a}),98);
__d("useMWV2SendOpenStagedMedia",["ArmadilloDataTraceCheckPoint","I64","Int64Hooks","LSAppendDataTraceAddonStoredProcedure","LSFactory","LSGenerateTraceId","LSInsertNewMediaSendStoredProcedure","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","LSShape","LSThreadBitOffset","LSVec","MWConsole","MWMediaTraceHandler","MWPActor.react","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","MWPReplyContext.react","MWPSendMessageLogger","MessagingLoggingUtils","MessengerWebEventsFalcoEvent","asyncToGeneratorRuntime","gkx","react","updateAndFlushLSDataTrace","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext;function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(i||(i=d("I64"))).of_int32(e)))});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).minus_one,tags:b}))});return o.apply(this,arguments)}function a(a){var e=a.onOptimisticMessageCreation,f=a.thread,g=d("MWPActor.react").useActor();a=k(d("MWPReplyContext.react").MWPReplyContext);var h=a.reply,m=c("useLSMessagingInitiatingSource")(),o=d("LSThreadBitOffset").has(40,f);return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.firstAttachmentTypeContents,k=a.isFirstMessage;k=k===void 0?!1:k;var p=a.isFirstMessageText,q=a.mediaStagings,r=a.sendFirstMessageSeparately;r=r===void 0?!1:r;var s=a.setupS2SLogging,t=a.source,u=a.transaction,v=c("LSFactory")(u);a={contents:b};b=q[0];if(q.length===0){d("MWPSendMessageLogger").log(f.threadKey,f.threadType,g,void 0,[],t,a.contents,h!=null);return}var w={contents:!0};a.contents=d("MessagingLoggingUtils").convertI64ToAttachmentType(b.attachmentType);b=d("MWPComposerMediaUploadUtil").createPartitionedAttachments(q,o);for(var x=0;x<b.length;x++)if(r===!1||x===0&&k===!0&&p===!1||k===!1){var y=b[x],z=c("LSGenerateTraceId")(),A=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(v,{attachments:c("LSVec").ofArray(y.map(d("LSShape").ofRecord)),replySourceId:h==null?void 0:h.messageId,replySourceType:h!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:h!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:g,threadKey:f.threadKey,threadType:f.threadType})),B=A[0];x===0&&s(B);yield u.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:m,markThreadRead:!1,messageId:void 0,offlineThreadingId:B,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(i||(i=d("I64"))).of_string(B),threadAttributionSource:t,threadKey:f.threadKey});e!==void 0&&e({TAG:2,numberOfAttachments:y.length,offlineThreadingId:B});yield l(u,z,i.of_int32(y.length),a.contents);A=function*(a){var b=y[a];yield c("LSInsertNewMediaSendStoredProcedure")(v,{attachmentType:b.attachment_type,inMessageIndex:(i||(i=d("I64"))).of_int32(a),isSecure:!1,offlineAttachmentId:b.attachment_fbid,offlineThreadingId:B,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});a=q.find(function(a){return a.offlineAttachmentId===b.offline_attachment_id});if(a!=null){var e=a.fbid;e!=null&&(yield c("LSMarkSubJobCompletedV2StoredProcedure")(v,{fbid:e,offlineAttachmentId:b.attachment_fbid}),yield d("MWPOpenComposerUtils").deleteMediaStaging(u,b.attachment_fbid),yield d("MWPOpenComposerUtils").updateAttachment(u,f.threadKey,B,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{attachmentFbid:(i||(i=d("I64"))).to_string(e)})}))}w.contents=!1;yield d("MWPOpenComposerUtils").updateMediaStaging(u,b.attachment_fbid,function(a){return{attachmentType:a.attachmentType,durationMs:a.durationMs,fbid:a.fbid,filename:a.filename,fileSize:a.fileSize,hasError:a.hasError,isSent:!0,mailboxType:a.mailboxType,mimeType:a.mimeType,offlineAttachmentId:a.offlineAttachmentId,offlineThreadingId:a.offlineThreadingId,previewHeight:a.previewHeight,previewUrl:a.previewUrl,previewWidth:a.previewWidth,progress:a.progress,threadKey:a.threadKey}});c("gkx")("24136")&&(yield d("MWPOpenComposerUtils").updateAttachment(u,f.threadKey,B,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{previewHeight:void 0,previewWidth:void 0})}))};for(var C=0;C<y.length;C++)yield* A(C);d("MWPSendMessageLogger").log(f.threadKey,f.threadType,g,B,y.map(function(a){return a.attachment_fbid}),t,a.contents,h!=null);yield d("MWPOpenComposerUtils").resumeSendJob(v,B,(A=z)!=null?A:void 0);yield n(u,i.to_string(f.threadKey),z);yield c("updateAndFlushLSDataTrace")(u,z)}C=(i||(i=d("I64"))).to_string(f.threadKey);A=d("LSMessagingThreadTypeUtil").isGroup(f.threadType)?[C,null]:[null,C];var D=A[0],E=A[1];c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:w.contents?"hit_send_message_with_all_files_uploaded":"hit_send_message_with_files_pending",extra_data:null,other_user_fbid:E,thread_fbid:D}})});return function(b){return a.apply(this,arguments)}}(),[o,f.threadKey,f.threadType,g,h,m,e])}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClipImplShared",["I64","Int64Hooks","LSFactory","LSInsertNewMediaSendStoredProcedure","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSShape","LSVec","MWMediaTraceHandler","MWPActor.react","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","MWPReplyContext.react","MessagingLoggingUtils","OfflineThreadingId","ReQL","asyncToGeneratorRuntime","promiseDone","react","useLSMessagingInitiatingSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(k||(k=d("I64"))).of_int32(e)))});return n.apply(this,arguments)}function o(a,b,c,e){if(a==null)return;if(!a.startsWith("blob:"))return;var f={contents:function(){}};f.contents=d("ReQL").fromTableAscending(c.tables.attachments).getKeyRange(e).subscribe(function(c,d){if(d.operation==="put"){c=d.value;if(c.attachmentFbid!==b.toString())return;d=c.playableUrl;d!=null&&!d.startsWith("blob:")&&(f.contents(),URL.revokeObjectURL(a))}})}function a(a){var e=a.onOptimisticMessageCreation,f=a.onUploadFailure,g=a.onUploadStart,i=a.onUploadSuccess,n=a.sendMessageLogger,p=a.skipUrlPreviewGen,q=a.threadKey,r=a.threadType,s=(h||(h=c("useReStore")))(),t=d("MWPActor.react").useActor();a=l(d("MWPReplyContext.react").MWPReplyContext);var u=a.reply,v=c("useLSMessagingInitiatingSource")();return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var h=a.dataTraceId,l=a.setupS2SLogging,w=a.source,x=a.transaction;a=a.voiceClip;var y=c("LSFactory")(x),z=d("OfflineThreadingId").createOfflineThreadingID(),A=d("MWPComposerMediaUploadUtil").getAudioAttachment(z,a.file,a.duration,a.waveformData);yield m(x,h,(k||(k=d("I64"))).one,2);var B=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(y,{attachments:c("LSVec").ofArray([d("LSShape").ofRecord(A)]),replySourceId:u==null?void 0:u.messageId,replySourceType:u!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:u!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:t,threadKey:q,threadType:r})),C=B[0];l(C);yield x.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:v,markThreadRead:!1,messageId:void 0,offlineThreadingId:C,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:p,taskId:k.of_string(C),threadAttributionSource:w,threadKey:q});e!=null&&e({TAG:1,offlineThreadingId:C});yield c("LSInsertNewMediaSendStoredProcedure")(y,{attachmentType:A.attachment_type,inMessageIndex:k.zero,isSecure:!1,offlineAttachmentId:z,offlineThreadingId:C,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});B=function(a,e){if(e==null)return;c("promiseDone")(s.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("LSFactory")(a);yield c("LSMarkSubJobCompletedV2StoredProcedure")(a,{fbid:(k||(k=d("I64"))).of_float(e),offlineAttachmentId:z});yield d("MWPOpenComposerUtils").resumeSendJob(a,C,h);o(A.playable_url,e,s,q)});return function(b){return a.apply(this,arguments)}}(),"readwrite"));n({actor:t,attachmentFbids:[(k||(k=d("I64"))).to_string(k.of_float(e))],attachmentType:d("MessagingLoggingUtils").convertI64ToAttachmentType(A.attachment_type),hasReply:u!=null,key:q,offlineThreadingId:C,source:w,type:r});i&&i(a)};l=function(a,b){if(f){f((b=b.response.getErrorDescriptionString())!=null?b:"unknown_upload_failure",a)}};d("MWPComposerMediaUploadUtil").startUpload(g,void 0,B,l,!0,[a.file],[z],void 0,void 0,a.waveformData,void 0,k.to_string(t))});return function(b){return a.apply(this,arguments)}}(),[s,t,q,r,u,v,p,e,g,n,i,f])}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClip",["Int64Hooks","MWPSendMessageLogger","useMWV2SendOpenVoiceClipImplShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.onOptimisticMessageCreation,e=a.onUploadFailure,f=a.onUploadStart,g=a.onUploadSuccess,h=a.skipUrlPreviewGen;a=a.thread;var i=d("Int64Hooks").useCallbackInt64(function(a){var b=a.actor,c=a.attachmentFbids,e=a.attachmentType,f=a.hasReply,g=a.key,h=a.offlineThreadingId,i=a.source;a=a.type;b!=null&&d("MWPSendMessageLogger").log(g,a,b,h,c,i,e,f)},[]);return c("useMWV2SendOpenVoiceClipImplShared")({onOptimisticMessageCreation:b,onUploadFailure:e,onUploadStart:f,onUploadSuccess:g,sendMessageLogger:i,skipUrlPreviewGen:h,threadKey:a.threadKey,threadType:a.threadType})}g["default"]=a}),98);
__d("useMWV2SendOpenMessage",["I64","Int64Hooks","LSGenerateTraceId","LSMessagingThreadTypeUtil","LSShape","MWPReplyContext.react","MWSharedMsgLogUtils","MWV2ComposerActionsContext.react","MWV2SetupS2SLoggingShared","ReQL","asyncToGeneratorRuntime","gkx","hasDefaultThreadOneToOneCapability","react","sendToSentQPLLogger","useAsyncReStore","useLSMessagingInitiatingSource","useMWLSDefaultThreadSource","useMWV2SendOpenMessageImpl","useMWV2SendOpenStagedMedia","useMWV2SendOpenVoiceClip"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useContext;function a(a){var e=a.onOptimisticMessageCreation,f=a.onUploadFailure,g=a.onUploadStart,h=a.onUploadSuccess,k=a.pluginType,l=a.skipUrlPreviewGen,m=a.thread,n=c("useAsyncReStore")();a=j(d("MWPReplyContext.react").MWPReplyContext);var o=a.reply,p=c("useLSMessagingInitiatingSource")(),q=c("useMWLSDefaultThreadSource")(),r=c("useMWV2SendOpenVoiceClip")({onOptimisticMessageCreation:e,onUploadFailure:f,onUploadStart:g,onUploadSuccess:h,skipUrlPreviewGen:l,thread:m}),s=c("useMWV2SendOpenStagedMedia")({onOptimisticMessageCreation:e,thread:m}),t=c("useMWV2SendOpenMessageImpl")({onOptimisticMessageCreation:e,pluginType:k,skipUrlPreviewGen:l,thread:m}),u=d("LSMessagingThreadTypeUtil").isMessageRequest(m);a=j(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var v=a.onMessageSendAttempt;return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,j,k,l,w,x,y,z,A,B,C,D){y===void 0&&(y=!1);z===void 0&&(z=!1);var E=!1;v==null?void 0:v(!0);function F(a){A.addMarkerPoint(a,"AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(B,a)}var G=q(m.threadKey),H=c("LSGenerateTraceId")(),I={contents:1};C=m.eventStartTimestampMs!=null;var J=m.threadType,K=(yield n),L=c("MWV2SetupS2SLoggingShared")({db:K,initiatingSource:p,isCommunityEvent:C,isMessageRequest:u,s2sInstanceKey:B,threadType:J,traceSendMessageAPI:A});if(c("gkx")("24121")){C=(yield c("hasDefaultThreadOneToOneCapability")(m.threadKey,K));C&&(F("invalid_send_to_default_e2ee"),d("sendToSentQPLLogger").addSendToSentAnnotations(B,{string:{invalid_send_to_default_e2ee_attribution:(i||(i=d("I64"))).to_string(G)}}))}return K.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.media_staging).filter(function(a){return!a.isSent&&(i||(i=d("I64"))).equal(a.threadKey,m.threadKey)}))),n=d("MWSharedMsgLogUtils").getMessageTypeParams(a,g,o,f,j,l,c);d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(A,n,m,p);d("sendToSentQPLLogger").addSendToSentAnnotations(B,yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(m,n,p));if(l!=null){yield r({dataTraceId:H,setupS2SLogging:L,source:G,transaction:b,voiceClip:l});return}var q=n.hasGif,u=n.hasSticker,v=n.hasText;u?I.contents=4:q&&(I.contents=6);var C=e!=null?d("LSShape").ofRecord({mention_ids:e.map(function(a){return a.id}).join(","),mention_lengths:e.map(function(a){return String(a.length)}).join(","),mention_offsets:e.map(function(a){return String(a.offset)}).join(","),mention_types:e.length!==0?e.map(function(a){return a.type}).join(","):void 0}):void 0;F("before_create_optimistic_message");if(v||u||q){E=!0;if(y===!1||z===!0){yield t({afterSend:x,attributionAppId:h,dataTraceId:H,externalAttachmentUrl:j,hotEmojiSize:g,logSendPoint:F,mentionData:C,messageText:a,messageTypeParams:n,optimisticAttachmentPreview:k,platformToken:w,profileRanges:e,richTextFormatType:D,s2sInstanceKey:B,setupS2SLogging:L,source:G,stickerID:f,transaction:b});if(y===!0)return}}else x!=null&&x();!u&&!q&&(yield s({firstAttachmentTypeContents:I.contents,isFirstMessage:z,isFirstMessageText:E,mediaStagings:c,sendFirstMessageSeparately:y,setupS2SLogging:L,source:G,transaction:b}))});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui")});return function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a.apply(this,arguments)}}(),[q,p,u,n,o,s,r,t,v,m])}g["default"]=a}),98);
__d("useMWV2OnSendOpenMessage",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWOptimisticUpdateContactRelationship","MWCMThreadTypes.react","MWPActor.react","MWPReplyContext.react","MessageRequestsLog","promiseDone","qpl","react","sendToSentQPLLogger","useCometInteractionTracing","useMWV2SendOpenMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=b.useContext,l=b.useMemo;function a(a){var b=a.afterSendMessage,e=a.onOptimisticMessageCreation,f=a.onUploadFailure,g=a.onUploadStart,j=a.onUploadSuccess,m=a.pluginType,n=a.skipUrlPreviewGen,o=a.thread,p=(h||(h=c("useReStore")))(),q=d("MWPActor.react").useActor();a=k(d("MWPReplyContext.react").MWPReplyContext);var r=a.clearReply,s=o.threadSubtype,t=l(function(){return{is_community_event:(o.eventStartTimestampMs!=null).toString(),isCutover:(!1).toString(),isSecure:(!1).toString(),thread_id:(i||(i=d("I64"))).to_string(o.threadKey),thread_subtype:s&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(s)?(i||(i=d("I64"))).to_string(s):"",thread_type:i.to_string(o.threadType)}},[o,s]),u=c("useCometInteractionTracing")(c("qpl")._(30605384,"573"),"fast","INTERACTION",void 0,t),v=c("useMWV2SendOpenMessage")({onOptimisticMessageCreation:e,onUploadFailure:f,onUploadStart:g,onUploadSuccess:j,pluginType:m,skipUrlPreviewGen:n,thread:o});return d("Int64Hooks").useCallbackInt64(function(a,e,f,g,h,i,j,k,l,m,n,s,w,x){n===void 0&&(n=!1);s===void 0&&(s=!1);var y=d("LSMessagingThreadTypeUtil").isMessageRequest(o);return u(function(u){var w=d("sendToSentQPLLogger").markSendToSentStart();d("sendToSentQPLLogger").addSendToSentAnnotations(w,{string:t});c("promiseDone")(v(a,e,f,g,h,i,j,k,l,m,n,s,u,w,void 0,x),function(){b(),r(o.threadKey,!1),d("MAWOptimisticUpdateContactRelationship").call(o,p,q),y&&d("MessageRequestsLog").logActionConfirmed(o,1)})})},[o,u,t,v,b,r,p,q])}g["default"]=a}),98);
__d("useMessengerWebThreadSeenLogging",["CometDebounce","Int64Hooks","MessengerWebUXLogger","logMessengerWebFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.entryPoint,e=a.threadKey,f=a.threadType,g=c("MessengerWebUXLogger").useInteractionLogger(),h=c("CometDebounce")(function(){b!=null&&c("logMessengerWebFalcoEvent")({threadKey:e,threadType:f},"seen_receipt",b),g==null?void 0:g({entryPoint:b,eventName:"read_receipt",threadKey:e,threadType:f})});return d("Int64Hooks").useCallbackInt64(function(){return h()},[h])}g["default"]=a}),98);
__d("useRegisterMAWThreadEvent",["I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReady","MAWThreadEvent","Promise","promiseDone","useMWGetOtherUserContact","useMWIsReadReceiptsDisabledForThread","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a){var e=a.authorityLevel,f=a.threadKey,g=a.threadType,l=(j||(j=d("I64"))).ge(e,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),m=(i||(i=c("useReStore")))(),n=c("useMWIsReadReceiptsDisabledForThread")(a.threadKey),o=c("useMWGetOtherUserContact")(a.threadKey,a.threadType,["capabilities","capabilities2","contactViewerRelationship"]);d("Int64Hooks").useEffectInt64(function(){d("LSMessagingThreadTypeUtil").isSecure(g)&&l&&c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(m.tables,f,"useRegisterMAWThreadEvent",function(a,c,e){d("MAWThreadEvent").setThreadEventHandler(e,o,n);return(h||(h=b("Promise"))).resolve()}))},[f,g,l,m,n,o])}g["default"]=a}),98);