;/*FB_PKG_DELIM*/

__d("CometGroupMembersExpertsRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7448020705217963"}),null);
__d("CometGroupMembersExpertsRootQuery$Parameters",["CometGroupMembersExpertsRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometGroupMembersExpertsRootQuery_facebookRelayOperation"),metadata:{},name:"CometGroupMembersExpertsRootQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometGroupMembersExpertsRoot.entrypoint",["CometGroupMembersExpertsRootQuery$Parameters","JSResourceForInteraction","WebPixelRatio","buildGroupCometRootRoute.entrypoint"],(function(a,b,c,d,e,f,g){"use strict";a=c("buildGroupCometRootRoute.entrypoint")(c("JSResourceForInteraction")("CometGroupMembersExpertsRoot.react").__setRef("CometGroupMembersExpertsRoot.entrypoint"),function(a){a=a.routeProps;a=a.groupID;a={groupID:a,scale:d("WebPixelRatio").get()};return{queries:{queryReference:{parameters:b("CometGroupMembersExpertsRootQuery$Parameters"),variables:a}}}});g["default"]=a}),98);
__d("MAWCreateOptimisticAttachmentFromEB",["EchoMessageMediaFieldUtils","I64","LSAuthorityLevel","LSIntEnum","MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){switch(a){case d("EchoMessageMediaFieldUtils").AttachmentType.IMAGE:return c("MessagingAttachmentType").IMAGE;case d("EchoMessageMediaFieldUtils").AttachmentType.STICKER:return c("MessagingAttachmentType").STICKER;case d("EchoMessageMediaFieldUtils").AttachmentType.VIDEO:return c("MessagingAttachmentType").VIDEO;case d("EchoMessageMediaFieldUtils").AttachmentType.GIF:return c("MessagingAttachmentType").ANIMATED_IMAGE;case d("EchoMessageMediaFieldUtils").AttachmentType.PTT:return c("MessagingAttachmentType").AUDIO;case d("EchoMessageMediaFieldUtils").AttachmentType.XMA:return c("MessagingAttachmentType").XMA;case d("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT:return c("MessagingAttachmentType").FILE}}function a(a,b,e,f,g,k){a=(h||(h=d("I64"))).of_float(k);k={attachmentFbid:h.to_string(h.max_int),attachmentIndex:h.zero,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(j(f.attachmentType)),authorityLevel:i.ofNumber(c("LSAuthorityLevel").OPTIMISTIC),hasMedia:f.attachmentType!==d("EchoMessageMediaFieldUtils").AttachmentType.XMA,hasXma:f.attachmentType===d("EchoMessageMediaFieldUtils").AttachmentType.XMA,isSharable:!1,messageId:g,threadKey:e,timestampMs:a};f.size!=null&&(k=babelHelpers["extends"]({},k,{filesize:(h||(h=d("I64"))).of_float(f.size)}));f.previewContentHeight!=null&&(k=babelHelpers["extends"]({},k,{previewHeight:(h||(h=d("I64"))).of_float(f.previewContentHeight)}));f.previewContentWidth!=null&&(k=babelHelpers["extends"]({},k,{previewWidth:(h||(h=d("I64"))).of_float(f.previewContentWidth)}));return b.attachments.add(k)}g["default"]=a}),98);
__d("MAWCreateOptimisticMessageFromEB",["EchoMessage","I64","LSAuthorityLevel","LSHotEmojiSize","LSIntEnum","LSMessageSendStatus","MAWAdminMsg","MAWBridgeBuildMsg","MAWLocalizationType","asyncToGeneratorRuntime","cr:2472"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){if(a==null)return 1;if(b!=null&&b===!0)return 8192;switch(a){case d("EchoMessage").EchoXMessageContentType.TEXT:return 1;case d("EchoMessage").EchoXMessageContentType.IMAGE:case d("EchoMessage").EchoXMessageContentType.VIDEO:return 2;case d("EchoMessage").EchoXMessageContentType.AUDIO:return 4;case d("EchoMessage").EchoXMessageContentType.STICKER:return 4096;case d("EchoMessage").EchoXMessageContentType.GIF:return 16384;case d("EchoMessage").EchoXMessageContentType.XMA:return 1024;case d("EchoMessage").EchoXMessageContentType.DOCUMENT:return 64;default:return 1}}function a(a,b,c,d,e,f,g,h,i,j,l,m){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k,l,m,n,o,p,q,r){var s=(h||(h=d("I64"))).of_float(r);p=p;q(p);q=(yield d("MAWBridgeBuildMsg").buildOptimisticMessage(a,e,f,p,l,void 0,s,o));yield e.messages.add(babelHelpers["extends"]({},q,{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),displayedContentTypes:i.ofNumber(j(g,k)),hasQuickReplies:!1,hotEmojiSize:n,isAdminMessage:!1,isCollapsed:!1,isUnsent:!1,messageId:p,offlineThreadingId:p,primarySortKey:s,senderId:m,sendStatus:i.ofNumber(c("LSMessageSendStatus").SERVER_RECEIVED),sendStatusV2:i.ofNumber(2),textHasLinks:!1,threadKey:l,timestampMs:s,transportKey:"WhatsApp",viewFlags:i.ofNumber(0)}));a=b("cr:2472")==null?f:b("cr:2472").unvault(f);o=n!=null&&(h||(h=d("I64"))).equal(n,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))&&a==="\ud83d\udc4d"?"(Y)":f;e=d("MAWAdminMsg").buildLocalizedString([o],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT);return{offlineMsgId:p,senderId:m,serverTsInMilliseconds:r,snippetString:e}});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MAWRestoreMessagesFromEncryptedBackupsPrefetch",["EchoMessage","I64","LSDatabaseSingleton","MAWBridgeReactionUpsertHandler","MAWBridgeUpdateClientRestoreStatus","MAWBumpThread","MAWChatJid","MAWCreateOptimisticAttachmentFromEB","MAWCreateOptimisticMessageFromEB","MAWJobDefinitions","MAWThreadId","MAWTimedJob","MAWUpdateClientRestoreStatusOperationType","MAWVault","Promise","QPLUserFlow","Random","ReQL","WAJobOrchestratorTypes","WALoggerDeferred","WAStanzaUtils","WATagsLogger","WATimeUtils","asyncToGeneratorRuntime","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to get thread key for ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Authoritative timestamp not set for echo message. Message origin: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid timestamp for echo message corresponding to 1/1/1970. Message origin: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] decoded echo objects: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to create optimistic message as offline threading id doesn't exist in echo message"]);o=function(){return a};return a}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.messages).getKeyRange(b)));return a!=null?a.timestampMs:void 0});return q.apply(this,arguments)}function r(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){c.reactions!=null&&(yield (j||(j=b("Promise"))).all(c.reactions.map(function(g,h){if(c.reactionAuthoritativeTimestampMs!=null&&h<c.reactionAuthoritativeTimestampMs.length){var i=g.displayName;h=c.reactionAuthoritativeTimestampMs[h];if(i!=null&&h!=null){h=d("WATimeUtils").castToUnixTime(Number(h)/1e3);g=g.localKey;return d("MAWBridgeReactionUpsertHandler").attachmentMutationsOptimisticHandler(a,g,e,f,h,i)}}return(j||(j=b("Promise"))).resolve()})))});return s.apply(this,arguments)}function t(a,e,f,g,i,k){if(g!=null){var l=g.threadKey,m=[];return a.reduce(function(a,i){return a.then(function(){if(i!=null&&g!=null){var a=i.from;if((a==null?void 0:a.localKey)!=null){var n=i||{},o=n.isForwarded,p=n.text;p=p===void 0?"":p;var q=n.xContentType,s=n.xOfflineThreadingId;n=v(i);if(n==null)return(j||(j=b("Promise"))).resolve();p=s!=null?c("MAWCreateOptimisticMessageFromEB")(e,k,d("MAWVault").vault(p),q,o,g.threadKey,(h||(h=d("I64"))).of_string(a.localKey),void 0,[],s,function(){},n):(j||(j=b("Promise"))).resolve(null);return p.then(function(a){if(a!=null){m.push(a);a={msgId:a.offlineMsgId,ts:a.serverTsInMilliseconds};s!=null&&f.set(d("WAStanzaUtils").toStanzaId(s),a);if(i.reactions!=null)return r(k,i,l,a.msgId).then(function(){})}else d("WATagsLogger").TAGS(["labyrinth_web","eb_frontloading"]).ERROR(["[labyrinth_web] Unable to create optimistic message as offline threading id doesn't exist in echo message"])})}else return(j||(j=b("Promise"))).resolve()}else return(j||(j=b("Promise"))).resolve()})},(j||(j=b("Promise"))).resolve()).then(function(){return d("MAWBridgeUpdateClientRestoreStatus").call(k,{action:d("MAWUpdateClientRestoreStatusOperationType").markCompleteClientRestoreStatus,ebPrefetch:!0,threadId:i})}).then(function(){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(k.threads).getKeyRange(l)).then(function(a){if(a!=null)return(j||(j=b("Promise"))).all(m.map(function(a){var c=(h||(h=d("I64"))).of_float(a.serverTsInMilliseconds);if((h||(h=d("I64"))).equal(g.lastActivityTimestampMs,c))return d("MAWBumpThread").threadMutation(k,l,c,c,a.snippetString,a.senderId);else return(j||(j=b("Promise"))).resolve()})).then(function(){return(j||(j=b("Promise"))).resolve()})})})}return(j||(j=b("Promise"))).resolve()}function u(a,e,f,g,h){if(f==null)return(j||(j=b("Promise"))).resolve();var i=f.threadKey;g=a.filter(function(a){return(a==null?void 0:a.contentType)===d("EchoMessage").EchoMessageContentType.MEDIA||(a==null?void 0:a.contentType)===d("EchoMessage").EchoMessageContentType.XMA});return(j||(j=b("Promise"))).all(g.map(function(a){var g;if(f==null||(a==null?void 0:(g=a.from)==null?void 0:g.localKey)==null)return(j||(j=b("Promise"))).resolve();g=a||{};a=g.authoritativeTimestampMs;var k=g.displayTimestampMs,l=g.mediaData;g=g.xOfflineThreadingId;if(l==null)return(j||(j=b("Promise"))).resolve();a=a!=null?d("WATimeUtils").castToUnixTime(a):d("WATimeUtils").castToUnixTime(k||0);return g!=null?c("MAWCreateOptimisticAttachmentFromEB")(e,h,i,l,g,a):(j||(j=b("Promise"))).resolve(function(){void d("WALoggerDeferred").ERROR(o())})})).then(function(){return(j||(j=b("Promise"))).resolve()})}function v(a){var b=15778656e5,c=a==null?void 0:a.authoritativeTimestampMs;if(c!=null&&c>b)return c;else if((a==null?void 0:a.displayTimestampMs)!=null)return a.displayTimestampMs;return null}function w(a){if((a==null?void 0:a.contentType)==null)return!1;switch(a.contentType){case d("EchoMessage").EchoMessageContentType.TEXT:case d("EchoMessage").EchoMessageContentType.MEDIA:case d("EchoMessage").EchoMessageContentType.XMA:return!0;default:return!1}}function a(a,b,c,d,e,f,g,h,i,j,k,l,m){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,o,q,r,s,v,x,y){j=new Map();q=(yield d("MAWChatJid").toThreadKeyMaybe(a,e));var z=Math.floor(d("Random").random()*1e4)+Date.now()+1e4;c("QPLUserFlow").start(c("qpl")._(521482576,"1069"),{annotations:{bool:{isInitialRestore:v==null,isPointRestore:r},string:{thread_id:e}},instanceKey:z});c("QPLUserFlow").addPoint(c("qpl")._(521482576,"1069"),"optimistic_message_restore_start",{instanceKey:z});if(q!=null){var A=(yield d("MAWThreadId").getThreadFromJid(a,q)),B=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton),C=f.map(function(a){return d("EchoMessage").decodeEchoMessage(a)});void d("WALoggerDeferred").LOG(n(),C.length);var D=(yield p(a,q));q=C.filter(function(a){return A!=null&&a!=null&&(D==null||a.sortOrderMs>(h||(h=d("I64"))).to_float(D))}).filter(w).filter(function(a){if((a==null?void 0:a.authoritativeTimestampMs)!=null&&(a==null?void 0:a.authoritativeTimestampMs)===0||(a==null?void 0:a.authoritativeTimestampMs)==null&&(a==null?void 0:a.displayTimestampMs)!=null&&(a==null?void 0:a.displayTimestampMs)===0){void d("WALoggerDeferred").ERROR(m(),a.serializationOrigin);return!1}(a==null?void 0:a.authoritativeTimestampMs)===null&&void d("WALoggerDeferred").ERROR(l(),a.serializationOrigin);return!0});yield t(q,B,j,A,e,a);yield u(q,B,A,e,a);c("QPLUserFlow").addPoint(c("qpl")._(521482576,"1069"),"optimistic_message_restore_end",{data:{"int":{messages_optimistically_restored:j.size}},instanceKey:z});c("promiseDone")(d("MAWTimedJob").TimedUIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers.restoreMessagesFromEncryptedBackups(b,e,f,g,o,r,(C=x)!=null?C:void 0,(q=s)!=null?q:void 0,(B=v)!=null?B:void 0,z,j,y,{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION})))}else void d("WALoggerDeferred").ERROR(k(),e)});return x.apply(this,arguments)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("DYICheckpointContentQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5615113848599491"}),null);
__d("MAWRestoreMessagesFromEncryptedBackupsNOP",["I64","LSDataTraceCheckPoint","LSIntEnum","MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUpdateClientRestoreStatus","MAWChatJid","MAWEncryptedBackupsUpdateGlobalRestoreStatus","MAWJobDefinitions","MAWMIC","MAWOfflineQueueStatus","MAWTimedJob","MAWUpdateClientRestoreStatusOperationType","Promise","ReQL","WAJobOrchestratorTypes","WALoggerDeferred","WATagsLogger","asyncToGeneratorRuntime","cr:4992","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Calling worker job for thread "," StartSortKey: "," messagesCount: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Calling prefetch for thread ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to get thread key for "," when calling restoreMessagesFromEncryptedBackup"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][","] Received echo documents for thread: "," startSortKey: "," messagesCount: ",""]);n=function(){return a};return a}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){try{c=(yield d("MAWChatJid").toThreadKeyMaybe(a,c));if(c!=null){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages_ranges_v2__generated).getKeyRange(c)));if(a!=null)return a.minMessageId}}catch(a){return(j||(j=b("Promise"))).reject(a)}return});return p.apply(this,arguments)}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(b===0){yield d("MAWMIC").startMAWMICFlow();d("MAWMIC").markEvent("eb_restore_start");c&&d("MAWMIC").markEvent("eb_prefetch_start");return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table)).then(function(a){a.forEach(function(a){a=d("MAWJobDefinitions").toThreadJidPrimaryId((h||(h=d("I64"))).to_string(a.jid));d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").addThreadIdToStatusArray(a,"restore");c&&d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").addThreadIdToStatusArray(a,"ebprefetch")})})}});return r.apply(this,arguments)}function a(a,b,c,d,e,f,g,h,i,j,k,l){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,h,p,r,s,t,u,v,w){var x;d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",(x=u)!=null?x:""]).LOG(n(),(x=u)!=null?x:"",f,v,g.length);x=(yield d("MAWChatJid").toThreadKeyMaybe(a,f));x==null&&void d("WALoggerDeferred").ERROR(m(),f);x=!d("MAWOfflineQueueStatus").isOfflineQueueComplete()&&b("cr:4992")!=null&&v==null&&f!=null;var y=d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").getCurrentGlobalRestoreStatusArrayLength("restore");yield q(a,y,x);try{y=(yield o(a,f));if(x&&b("cr:4992")!=null){d("WATagsLogger").TAGS(["labyrinth_web","eb_prefetch",(x=u)!=null?x:""]).LOG(l(),f);x={action:d("MAWUpdateClientRestoreStatusOperationType").upsertClientRestoreStatus,threadId:f};yield d("MAWBridgeUpdateClientRestoreStatus").call(a,x);yield b("cr:4992")(a,e,f,g,h,p,r,s,t,u,v,y,w)}else{d("WATagsLogger").TAGS(["labyrinth_web","eb_restore",(x=u)!=null?x:""]).LOG(k(),f,v,g.length);c("promiseDone")(d("MAWTimedJob").TimedUIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers.restoreMessagesFromEncryptedBackups(e,f,g,h,r,t,(p=y)!=null?p:void 0,(s=u)!=null?s:void 0,(x=v)!=null?x:void 0,void 0,void 0,w,{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION})))}}catch(e){if(u!=null)return d("MAWBridgeTraceRecordCheckpointHandler").call(a,{checkPointId:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),dataTraceId:u,errorMessage:e,shouldFlush:!0,syncChannel:-1,tags:void 0}).then(function(){return(j||(j=b("Promise"))).reject(e)})}});return s.apply(this,arguments)}g.call=a}),98);