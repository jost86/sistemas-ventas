;/*FB_PKG_DELIM*/

__d("MWEBRestoreGapUI.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","cr:4062","promiseDone","qex","react","requireDeferred","useLabyrinthLogging","useMWEBGetUpsellState","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useRef,m=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreGapUI.react"),n={banner:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingStart:"x1xfsgkm",paddingLeft:null,paddingRight:null,paddingEnd:"xqmdsaz",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0}},o=(e=c("qex")._("179"))!=null?e:!1;function a(){var a=(i||(i=c("useReStore")))(),e=b("cr:4062")({}),f=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{}),g=f[0];f=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var j=f.startFlow;f=c("useMWEBGetUpsellState")();f=f.isRestoreUpsellsDismissed;var p=c("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_GAP_UI,q=l(!1),r=function(b){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:a,onFetch:function(a){var e=a.ebsmWiped,f=a.firstUpsellTime,g=a.hasEbKeysLocally,h=a.hasUserRestoredBefore,i=a.hasUserRestoredBeforeTemp,k=a.hasEBSM;a=a.hasPDB;j({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:k,has_pdb:a,has_user_restored_before:h,has_user_restored_before_temp:i,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:p});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,b);q.current===!1&&(q.current=!0,c("promiseDone")(m.load(),function(a){return a(g)}))}})},s=c("useVisibilityObserver")({onVisible:function(){r("RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_IMPRESSION")}});return e!==4||f||o?null:k.jsx(c("MWXRow.react"),{align:"center",paddingHorizontal:16,paddingVertical:12,ref:s,children:k.jsx(c("MWXRowItem.react"),{xstyle:n.banner,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:k.jsxs(k.Fragment,{children:[h._("__JHASH__4WMqcKoHbeS__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){r("RESTORE_IN_THREAD_GAP_UI_CTA_CLICK"),g({source:p})},target:"_blank",testid:void 0,children:h._("__JHASH__6flAN3HetRr__JHASH__")})})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreInThreadScrollPersistentBanner.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWPColorUtils","MWXLink.react","MWXText.react","QPLUserFlow","cr:8641","promiseDone","qex","react","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useRef,m=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreInThreadScrollPersistentBanner.react"),n=(e=c("qex")._("179"))!=null?e:!1;function a(a){var e,f=a.onDismissUpsell;a=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{});var g=a[0];a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var j=a.startFlow,o=(i||(i=c("useReStore")))(),p=l(!1),q=c("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_SCROLL_PERSISTENT_BANNER,r=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:o,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,k=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;j({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:k,has_user_restored_before_temp:b,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:q});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);p.current===!1&&(p.current=!0,c("promiseDone")(m.load(),function(a){return a(g)}))}})};a=c("useVisibilityObserver")({onVisible:function(){r("RESTORE_IN_THREAD_PERSISTENT_BANNER_IMPRESSION")}});e=b("cr:8641")==null?void 0:(e=b("cr:8641")())==null?void 0:e.threadTheme;var s=(e==null?void 0:e.titlebarBackgroundColor)!=null?d("MWPColorUtils").int64ToHex(e.titlebarBackgroundColor):void 0;e=(e==null?void 0:e.composerTintColor)!=null?d("MWPColorUtils").int64ToHex(e.composerTintColor):void 0;return n?null:k.jsx("div",{className:"xcrg951 x80vd3b x1q0q8m5 xso031l xt0psk2 x1o1nzlu x10b6aqq x889kno x10l6tqk x1wo2wf3 xh8yej3 x1vjfegm",ref:a,style:s!=null?{backgroundColor:s}:void 0,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",numberOfLines:2,type:"meta4",children:k.jsxs(k.Fragment,{children:[h._("__JHASH__4WMqcKoHbeS__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){r("RESTORE_IN_THREAD_PERSISTENT_BANNER_CTA_CLICKED"),g({onDismissUpsell:f,source:q})},target:"_blank",testid:void 0,weight:"semibold",children:k.jsx("div",{style:{color:e,display:"inline"},children:h._("__JHASH__6flAN3HetRr__JHASH__")})})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreInThreadScrollPersistentBannerWrapper.react",["MWEBRestoreInThreadScrollPersistentBanner.react","MWEncryptedBackupsDeferLocalStorageUpsell","cr:4062","react","useCometRouterState","useMWEBGetUpsellState","useMWEncryptedBackupsIsUpsellDismissed","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(){var a=(h||(h=c("useReStore")))(),e=c("useMWEncryptedBackupsIsUpsellDismissed")({upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.SCROLL_BANNER_CHAT_TAB}),f=e[0],g=e[1];e=c("useCometRouterState")();e=e==null?void 0:e.main.route.tabKey;var i=b("cr:4062")({}),k=c("useMWEBGetUpsellState")();k=k.isRestoreUpsellsDismissed;return e!=="messenger"&&i===4&&!f&&k===!1?j.jsx(c("MWEBRestoreInThreadScrollPersistentBanner.react"),{onDismissUpsell:function(){g(!0),d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:a,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.SCROLL_BANNER_CHAT_TAB})}}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);